(function(e){function t(t){for(var a,r,o=t[0],s=t[1],u=t[2],d=0,p=[];d<o.length;d++)r=o[d],c[r]&&p.push(c[r][0]),c[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==c[o]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},c={app:0},i=[];function o(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-29cd224d":"e79ec39a","chunk-62d9172b":"b86eaa3e","chunk-1ded731d":"7340d5fa","chunk-36408285":"3b58c35d","chunk-8f2e765c":"cbf09327","chunk-921c0406":"9bd86048","chunk-8a9548fc":"dd409f94"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-29cd224d":1,"chunk-62d9172b":1,"chunk-1ded731d":1,"chunk-36408285":1,"chunk-8f2e765c":1,"chunk-921c0406":1,"chunk-8a9548fc":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-29cd224d":"2ac1ef8b","chunk-62d9172b":"18a89535","chunk-1ded731d":"5f0bf2a0","chunk-36408285":"8a9a94e8","chunk-8f2e765c":"0b511f04","chunk-921c0406":"53206fce","chunk-8a9548fc":"421c2961"}[e]+".css",c=s.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var u=i[o],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===a||d===c))return t()}var p=document.getElementsByTagName("style");for(o=0;o<p.length;o++){u=p[o],d=u.getAttribute("data-href");if(d===a||d===c)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var a=t&&t.target&&t.target.src||c,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],l.parentNode.removeChild(l),n(i)},l.href=c;var b=document.getElementsByTagName("head")[0];b.appendChild(l)}).then(function(){r[e]=0}));var a=c[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise(function(t,n){a=c[e]=[t,n]});t.push(a[2]=i);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=o(e),u=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=c[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");i.type=a,i.request=r,n[1](i)}c[e]=void 0}};var p=setTimeout(function(){u({type:"timeout",target:d})},12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var l=d;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0f75":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n("d225"),r=n("b0b4"),c=n("2b0e"),i=n("a3d5"),o=n("6625"),s=n.n(o),u=n("e9a7"),d=n.n(u),p=function(){function e(){Object(a["a"])(this,e)}return Object(r["a"])(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n="...";if(e.length<=t)return e;var a=Math.floor(t/2);return e.substr(0,a)+n+e.substr(e.length-a)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(e,t){var n=i["a"].toUnits(e,t),a=parseFloat(n);if(0===a)return"0.0";if(a<1e-5)return"<0.00001";var r=s()(n,".");return r[1]&&r[1].length>5?n.substr(0,n.indexOf(".")+6):n}},{key:"capitalizeFirst",value:function(e){return d()(e)}}]),e}();c["a"].filter("truncate",p.truncate),c["a"].filter("decimals",p.decimals),c["a"].filter("upper",p.upper),c["a"].filter("displayFormat",p.displayFormat),c["a"].filter("capitalizeFirst",p.capitalizeFirst)},1:function(e,t){},1042:function(e){e.exports={contracts_version:null,chain_id:42,contracts:{SecretRegistry:{address:"0xd048809A1347A82592698CDcB060A5b4B417f207",transaction_hash:"0xb0d730fd49040e233438954c7f373b449d60f6ad23901164ca10be6e51bdf1ee",block_number:11976291,gas_cost:298578,constructor_arguments:[]},TokenNetworkRegistry:{address:"0x8CA88eF59acd4C0810f2b6a418Fe7e3efdbAA020",transaction_hash:"0x2e1c0eb6b06cae29c16e637cfc54b8cceb14922eb28629ed5e37dd6b0f1d532f",block_number:12953599,gas_cost:5030945,constructor_arguments:["0xd048809A1347A82592698CDcB060A5b4B417f207",42,500,555428,1157920892373162e62]}}}},"152b":function(e,t,n){"use strict";n("7f7f");var a=n("d225"),r=n("b0b4"),c=n("308d"),i=n("6bb5"),o=n("4e2b"),s=n("9ab4"),u=n("60a3"),d=n("5a48"),p=function(e){function t(){return Object(a["a"])(this,t),Object(c["a"])(this,Object(i["a"])(t).apply(this,arguments))}return Object(o["a"])(t,e),Object(r["a"])(t,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:d["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:d["a"].HOME})}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:d["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToSelectPaymentTarget",value:function(e){this.$router.push({name:d["a"].PAYMENT,params:{token:e}})}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:d["a"].SELECT_TOKEN})}},{key:"onBackClicked",value:function(){switch(this.$route.name){case d["a"].PAYMENT:case d["a"].CHANNELS:case d["a"].SELECT_TOKEN:this.navigateToHome();break;case d["a"].SELECT_HUB:this.navigateToTokenSelect();break;case d["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),t}(u["e"]);p=s["a"]([u["a"]],p),t["a"]=p},"1b3a":function(e,t,n){"use strict";var a=n("87f5"),r=n.n(a);r.a},"1ed1":function(e,t,n){},2:function(e,t){},"27c8":function(e,t,n){},"2e1f":function(e,t,n){e.exports=n.p+"img/done.24f4e34a.svg"},3:function(e,t){},"31a7":function(e){e.exports={contracts_version:null,chain_id:4,contracts:{SecretRegistry:{address:"0xfC83B78195A99Ee782fABCFF9d259764640cEc7E",transaction_hash:"0xf79919c727a4ad270548d7b0a3dcb5f4b6f391097528adfe5ec4cbfd1cda4faa",block_number:4667704,gas_cost:298578,constructor_arguments:[]},TokenNetworkRegistry:{address:"0xF5f1EAE6cfE4EA07f250791147a31c6ec295746E",transaction_hash:"0x06bbb7e0b77049aeeae4ace73d7a3220944d2a820711aa12a694fbbcf31ebbd8",block_number:4945144,gas_cost:5030945,constructor_arguments:["0xfC83B78195A99Ee782fABCFF9d259764640cEc7E",4,500,555428,1157920892373162e62]}}}},"38f3":function(e){e.exports=[{constant:!0,inputs:[{name:"",type:"address"}],name:"token_to_token_networks",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_max",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"deprecation_executor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"chain_id",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"contract_address",type:"address"}],name:"contractExists",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"max_token_networks",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token_network_created",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_min",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_token_address",type:"address"},{name:"_channel_participant_deposit_limit",type:"uint256"},{name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{name:"token_network_address",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"secret_registry_address",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_secret_registry_address",type:"address"},{name:"_chain_id",type:"uint256"},{name:"_settlement_timeout_min",type:"uint256"},{name:"_settlement_timeout_max",type:"uint256"},{name:"_max_token_networks",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"token_address",type:"address"},{indexed:!0,name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"}]},"38fc":function(e,t,n){"use strict";var a=n("ecc1"),r=n.n(a);r.a},"3ef6":function(e,t,n){"use strict";var a=n("7db8"),r=n.n(a);r.a},4:function(e,t){},"49f8":function(e,t,n){var a={"./en.json":"edd4"};function r(e){var t=c(e);return n(t)}function c(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id="49f8"},"5a48":function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e["PAYMENT"]="send-transaction",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel"}(a||(a={}))},"6df6":function(e,t,n){"use strict";var a=n("f464"),r=n.n(a);r.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"73f7":function(e,t,n){"use strict";var a=n("27c8"),r=n.n(a);r.a},"750b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticClass:"action-button",attrs:{"align-center":"","justify-center":""}},[n("v-flex",{staticClass:"text-center",attrs:{xs10:""}},[n("v-btn",{staticClass:"text-capitalize action-button__button",attrs:{disabled:!e.enabled,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v("\n      "+e._s(e.text)+"\n    ")])],1)],1)},r=[],c=n("d225"),i=n("b0b4"),o=n("308d"),s=n("6bb5"),u=n("4e2b"),d=n("9ab4"),p=n("60a3"),l=function(e){function t(){return Object(c["a"])(this,t),Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"click",value:function(){}}]),t}(p["e"]);d["a"]([Object(p["d"])({required:!0,type:Boolean})],l.prototype,"enabled",void 0),d["a"]([Object(p["d"])({required:!0})],l.prototype,"text",void 0),d["a"]([Object(p["b"])()],l.prototype,"click",null),l=d["a"]([Object(p["a"])({})],l);var b=l,f=b,m=(n("1b3a"),n("2877")),h=n("6544"),O=n.n(h),v=n("8336"),j=n("0e8f"),k=n("a722"),y=Object(m["a"])(f,a,r,!1,null,"7666ae40",null);t["a"]=y.exports;O()(y,{VBtn:v["a"],VFlex:j["a"],VLayout:k["a"]})},"77fd":function(e,t,n){"use strict";var a=n("d225"),r=n("b0b4"),c=n("308d"),i=n("6bb5"),o=n("4e2b"),s=n("9ab4"),u=n("60a3"),d=function(e){function t(){return Object(a["a"])(this,t),Object(c["a"])(this,Object(i["a"])(t).apply(this,arguments))}return Object(o["a"])(t,e),Object(r["a"])(t,[{key:"$blockie",value:function(e){return this.$identicon.getIdenticon(e)}}]),t}(u["e"]);d=s["a"]([u["a"]],d),t["a"]=d},"7db8":function(e,t,n){},8245:function(e,t,n){"use strict";var a=n("a82b"),r=n.n(a);r.a},"83e4":function(e,t,n){},"87a2":function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"e",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return a});var a,r=n("8404"),c=function(){return{label:"",title:"",description:""}},i=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},o={balance:r["Zero"],decimals:18,units:"0.0",address:""},s={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED"})(a||(a={}))},"87f5":function(e,t,n){},"8ecd":function(e,t,n){"use strict";var a=n("83e4"),r=n.n(a);r.a},"8ffa":function(e,t,n){"use strict";var a=n("ffdf"),r=n.n(a);r.a},"927e":function(e,t,n){e.exports=n.p+"img/copy_icon.80d12304.svg"},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a06c:function(e){e.exports=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"supply",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balances",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"decimals",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_initialAmount",type:"uint256"},{name:"_decimalUnits",type:"uint8"},{name:"_tokenName",type:"string"},{name:"_tokenSymbol",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!1,stateMutability:"nonpayable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}]},a0df:function(e){e.exports={contracts_version:null,chain_id:3,contracts:{SecretRegistry:{address:"0xA39faF9464b4E5668154003464e3a40ab9a83cB8",transaction_hash:"0x948201d71da1c344ff722257e2153eafa2f7a55c1dd2afc72fbf61271d8bfa3f",block_number:5914539,gas_cost:298578,constructor_arguments:[]},TokenNetworkRegistry:{address:"0xb9051B2Bb540297cfCeEB8C2F5D1461153B05e9F",transaction_hash:"0xd9726245824fb413677ba1ceddc23cf4354167d611d662920f78218a54d5654d",block_number:6229931,gas_cost:5030881,constructor_arguments:["0xA39faF9464b4E5668154003464e3a40ab9a83cB8",3,500,555428,1157920892373162e62]}}}},a1ab:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.display?a("div",{staticClass:"stepper"},[a("div",{staticClass:"stepper__card"},[a("div",{staticClass:"stepper__card__steps"},[e._l(e.steps,function(t,n){return a("div",{key:n,staticClass:"stepper__card__steps__step",class:{"stepper__card__steps__step--active":e.current===n&&!e.done}},[a("span",{staticClass:"stepper__card__steps__step__label"},[e._v("\n          "+e._s(t.label)+"\n        ")])])}),a("div",{staticClass:"stepper__card__steps__step",class:{"stepper__card__steps__step--active":e.done}},[e._v("\n        "+e._s(e.doneStep.label)+"\n      ")])],2),a("div",{staticClass:"stepper__card__content"},[a("div",{staticClass:"stepper__card__content__title"},[e.done?a("span",[e._v("\n          "+e._s(e.doneStep.title)+"\n        ")]):a("span",[e._v(e._s(e.steps[e.current].title))])]),e.done?a("div",[a("v-img",{staticClass:"stepper__card__content--done",attrs:{src:n("2e1f")}})],1):a("v-progress-circular",{staticClass:"stepper__card__content--progress",attrs:{size:110,width:7,indeterminate:""}}),a("p",{staticClass:"stepper__card__content__description"},[e.done?a("span",[e._v("\n          "+e._s(e.doneStep.description)+"\n        ")]):a("span",[e._v("\n          "+e._s(e.steps[e.current].description)+"\n        ")])])],1)])]):e._e()},r=[],c=n("d225"),i=n("308d"),o=n("6bb5"),s=n("4e2b"),u=n("9ab4"),d=n("60a3"),p=function(e){function t(){return Object(c["a"])(this,t),Object(i["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(s["a"])(t,e),t}(d["e"]);u["a"]([Object(d["d"])({required:!0})],p.prototype,"display",void 0),u["a"]([Object(d["d"])({required:!1,default:0})],p.prototype,"current",void 0),u["a"]([Object(d["d"])({required:!0})],p.prototype,"steps",void 0),u["a"]([Object(d["d"])({required:!0})],p.prototype,"doneStep",void 0),u["a"]([Object(d["d"])({})],p.prototype,"done",void 0),p=u["a"]([Object(d["a"])({})],p);var l=p,b=l,f=(n("8ffa"),n("2877")),m=n("6544"),h=n.n(m),O=n("adda"),v=n("490a"),j=Object(f["a"])(b,a,r,!1,null,"30108802",null);t["a"]=j.exports;h()(j,{VImg:O["a"],VProgressCircular:v["a"]})},a3d5:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n("28a5");var a=n("d225"),r=n("b0b4"),c=n("e7ea"),i=function(){function e(){Object(a["a"])(this,e)}return Object(r["a"])(e,null,[{key:"toEth",value:function(e){return c["utils"].formatEther(e)}},{key:"toUnits",value:function(e,t){return c["utils"].formatUnits(e,t)}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return c["utils"].parseUnits(e,t)}}]),e}()},a82b:function(e,t,n){},c52c:function(e,t,n){"use strict";var a=n("1ed1"),r=n.n(a);r.a},c998:function(e){e.exports={contracts_version:null,chain_id:5,contracts:{SecretRegistry:{address:"0xF6d610f7c8473a0F0c8c1653AF28A68C69860288",transaction_hash:"0x9e4d32a73673f046e731580c2a6aaafc28a9ca0aaecee689fb61e28754abcb82",block_number:875035,gas_cost:298578,constructor_arguments:[]},TokenNetworkRegistry:{address:"0x603882F4e7fAb5942a585048CADc71F91D6160c5",transaction_hash:"0x28b1c72f8ea8d18078a43768de5f5e91546a5ee06584eb9a7be51a27e05564e1",block_number:1152478,gas_cost:5030945,constructor_arguments:["0xF6d610f7c8473a0F0c8c1653AF28A68C69860288",5,500,555428,1157920892373162e62]}}}},cd49:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[e.inaccessible?n("splash-screen",{on:{connect:function(t){return e.connect()}}}):n("div",{attrs:{id:"application-wrapper"}},[n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-content",[n("v-container",{staticClass:"application__container",attrs:{fluid:"","fill-height":""}},[n("router-view")],1)],1)],1)]),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v("\n      "+e._s(e.$t("application.privacy-policy"))+"\n    ")])])],1)},c=[],i=(n("96cf"),n("3b8d")),o=n("d225"),s=n("b0b4"),u=n("308d"),d=n("6bb5"),p=n("4e2b"),l=n("9ab4"),b=n("60a3"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"splash-screen",attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs8:"",md6:"",lg4:""}},[a("div",{staticClass:"splash-screen__wrapper display-3"},[a("div",{staticClass:"splash-screen__logo-container"},[a("v-img",{staticClass:"splash-screen__logo",attrs:{src:n("9b19"),"min-width":"50px","aspect-ratio":"1",contain:""}})],1),a("div",{staticClass:"splash-screen__app-name"},[a("div",[e._v("\n            "+e._s(e.name)+"\n          ")])])]),a("div",{staticClass:"font-weight-light text-center splash-screen__disclaimer"},[e._v("\n        "+e._s(e.$t("splash-screen.disclaimer"))+"\n      ")]),a("div",{staticClass:"font-weight-light text-center splash-screen__matrix_sign"},[e._v("\n        "+e._s(e.$t("splash-screen.matrix-sign"))+"\n      ")]),a("div",{staticClass:"splash-screen__button"},[e.injectedProvider?a("action-button",{attrs:{text:e.$t("splash-screen.connect-button"),enabled:""},on:{click:function(t){return e.connect()}}}):a("span",{staticClass:"splash-screen__no-provider"},[e._v("\n          "+e._s(e.$t("splash-screen.no-provider"))+"\n        ")])],1),a("div",{staticClass:"splash-screen__message"},[e.accessDenied?a("no-access-message",{attrs:{reason:e.accessDenied}}):e._e()],1)])],1)],1)},m=[],h=n("f15c"),O=n("2f62"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v("\n      "+e._s(e.$t("no-access.unsupported-network"))+"\n    ")]):e.initializationFailed?n("span",[e._v("\n      "+e._s(e.$t("no-access.sdk-initialization-failure"))+"\n    ")]):n("span",[e._v("\n      "+e._s(e.$t("no-access.generic-error"))+"\n    ")])])])},j=[],k=n("87a2"),y=function(e){function t(){return Object(o["a"])(this,t),Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),Object(s["a"])(t,[{key:"networkUnsupported",get:function(){return this.reason===k["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===k["a"].INITIALIZATION_FAILED}}]),t}(b["e"]);l["a"]([Object(b["d"])({required:!0})],y.prototype,"reason",void 0),y=l["a"]([Object(b["a"])({})],y);var g=y,w=g,_=(n("8ecd"),n("2877")),x=n("6544"),E=n.n(x),R=n("0798"),A=Object(_["a"])(w,v,j,!1,null,"6b8163f4",null),C=A.exports;E()(A,{VAlert:R["a"]});var N=n("750b"),S=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.name="Raiden dApp",e}return Object(p["a"])(t,e),Object(s["a"])(t,[{key:"connect",value:function(){}},{key:"injectedProvider",get:function(){return h["a"].injectedWeb3Available()}}]),t}(b["e"]);l["a"]([Object(b["b"])()],S.prototype,"connect",null),S=l["a"]([Object(b["a"])({components:{ActionButton:N["a"],NoAccessMessage:C},computed:Object(O["c"])(["accessDenied"])})],S);var T=S,P=T,I=(n("c52c"),n("a523")),D=n("0e8f"),M=n("adda"),L=n("a722"),B=Object(_["a"])(P,f,m,!1,null,"65cd354f",null),$=B.exports;E()(B,{VContainer:I["a"],VFlex:D["a"],VImg:M["a"],VLayout:L["a"]});var F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return!e.loading&&e.defaultAccount?a("v-layout",{staticClass:"app-header",attrs:{column:""}},[a("v-layout",{staticClass:"app-header__top",attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"app-header__top__content"},[a("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?a("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[a("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),a("v-spacer"),a("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[a("div",{staticClass:"app-header__top__content__title"},[e._v("\n            "+e._s(e.$route.meta.title)+"\n          ")]),a("div",{staticClass:"app-header__top__content__network"},[e._v("\n            "+e._s(e.network)+"\n          ")])]),a("v-spacer"),a("div",[a("v-img",{staticClass:"app-header__top__content__blockie",attrs:{src:e.$blockie(e.defaultAccount),height:"36",width:"36",contain:"","aspect-ratio":"1"}})],1)],1)])],1),a("v-layout",{staticClass:"app-header__bottom",attrs:{"align-center":""}},[a("v-flex",{attrs:{xs6:""}},[a("div",{staticClass:"app-header__bottom__address text-left"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("span",e._g({},n),[e._v("\n              "+e._s(e._f("truncate")(e.defaultAccount,8))+"\n            ")])]}}],null,!1,3329657142)},[a("span",[e._v(e._s(e.defaultAccount))])]),a("v-tooltip",{attrs:{bottom:"",dark:"",activator:"#copyBtn"},model:{value:e.copied,callback:function(t){e.copied=t},expression:"copied"}},[a("span",[e._v(e._s(e.$t("app-header.copy-success")))])]),a("v-btn",{attrs:{id:"copyBtn",text:"",icon:""},on:{click:function(t){return e.copy()}}},[a("v-img",{staticClass:"app-header__bottom__address__copy",attrs:{src:n("927e"),contain:""}})],1)],1)]),a("v-flex",{attrs:{xs6:""}},[a("div",{staticClass:"app-header__bottom__balance text-right"},[e._v("\n        "+e._s(e._f("decimals")(e.accountBalance))+"\n        "),a("span",{staticClass:"app-header__bottom__balance__currency"},[e._v("\n          "+e._s(e.$t("app-header.currency"))+"\n        ")])])])],1),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.defaultAccount,expression:"defaultAccount"}],ref:"copy",staticClass:"app-header__copy-area",domProps:{value:e.defaultAccount},on:{input:function(t){t.target.composing||(e.defaultAccount=t.target.value)}}})],1):e._e()},U=[],H=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),V=(n("7f7f"),n("77fd")),W=n("5a48"),q=n("152b");function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach(function(t){Object(H["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var z=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.copied=!1,e.timeout=0,e}return Object(p["a"])(t,e),Object(s["a"])(t,[{key:"copy",value:function(){var e=this,t=this.$refs.copy;t.focus(),t.select(),this.copied=document.execCommand("copy"),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.copied=!1},2e3)}},{key:"canGoBack",get:function(){return this.$route.name!==W["a"].HOME}}]),t}(Object(b["c"])(V["a"],q["a"]));z=l["a"]([Object(b["a"])({computed:Z({},Object(O["c"])(["loading","defaultAccount","accountBalance"]),{},Object(O["b"])(["network"]))})],z);var X=z,Y=X,G=(n("3ef6"),n("8336")),Q=n("2fa4"),J=n("3a2f"),ee=Object(_["a"])(Y,F,U,!1,null,"1fb34092",null),te=ee.exports;E()(ee,{VBtn:G["a"],VFlex:D["a"],VImg:M["a"],VLayout:L["a"],VSpacer:Q["a"],VTooltip:J["a"]});var ne=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).call(this)),e.initialized=!1,e.name="Raiden dApp",e}return Object(p["a"])(t,e),Object(s["a"])(t,[{key:"connect",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.initialized=!1,this.$store.commit("reset"),e.next=4,this.$raiden.connect();case 4:return e.next=6,this.$raiden.fetchTokens();case 6:this.initialized=!0;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"destroyed",value:function(){this.$raiden.disconnect()}},{key:"inaccessible",get:function(){return!this.initialized||this.loading||this.accessDenied!==k["a"].UNDEFINED}}]),t}(b["e"]);ne=l["a"]([Object(b["a"])({computed:Object(O["c"])(["loading","accessDenied"]),components:{AppHeader:te,SplashScreen:$}})],ne);var ae=ne,re=ae,ce=(n("6df6"),n("7496")),ie=n("a75b"),oe=Object(_["a"])(re,r,c,!1,null,"72ad4681",null),se=oe.exports;E()(oe,{VApp:ce["a"],VContainer:I["a"],VContent:ie["a"]});var ue=n("2fe1");ue["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75"),n("6762"),n("2fdb");var de=n("8c4f"),pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-core")},le=[],be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tokens")},fe=[],me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:"","justify-space-between":"","fill-height":""}},[n("list-header",{staticClass:"connected-tokens__header",attrs:{header:e.$t("tokens.connected.header")}}),n("v-layout",{attrs:{"justify-center":"","fill-height":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-list",{staticClass:"connected-tokens__tokens",attrs:{expand:""}},e._l(e.tokens,function(t,a){return n("v-list-group",{key:t.token,staticClass:"connected-tokens__tokens__token",attrs:{"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item",{attrs:{id:"token-"+a}},[n("v-list-item-avatar",{staticClass:"list-blockie"},[n("img",{attrs:{src:e.$blockie(t.address),alt:e.$t("tokens.connected.token.blockie-alt")}})]),n("v-list-item-content",[n("v-list-item-title",{staticClass:"connected-tokens__tokens__token__info"},[e._v("\n                  "+e._s(e.$t("tokens.connected.token.token-info",{symbol:t.symbol,name:t.name}))+"\n                ")]),n("v-list-item-subtitle",{staticClass:"connected-tokens__tokens__token__address"},[e._v("\n                  "+e._s(t.address)+"\n                ")])],1)],1)]},proxy:!0}],null,!0)},[n("div",{staticClass:"connected-tokens__tokens__token__expanded",attrs:{id:"expanded-area-"+a}},[n("v-layout",{attrs:{"justify-center":""}},[n("v-btn",{staticClass:"text-capitalize connected-tokens__tokens__token__button",attrs:{id:"pay-"+a,to:"/payment/"+t.address}},[e._v("\n                "+e._s(e.$t("tokens.connected.token.buttons.pay"))+"\n              ")]),n("v-btn",{staticClass:"text-capitalize connected-tokens__tokens__token__button leave",attrs:{id:"leave-"+a},on:{click:function(n){return e.leaveNetwork(t)}}},[e._v("\n                "+e._s(e.$t("tokens.connected.token.buttons.disconnect"))+"\n              ")]),n("v-btn",{staticClass:"text-capitalize connected-tokens__tokens__token__button",attrs:{to:"/channels/"+t.address}},[e._v("\n                "+e._s(e.$t("tokens.connected.token.buttons.view-channels"))+"\n              ")])],1)],1)])}),1)],1)],1),n("action-button",{staticClass:"connected-tokens__button",attrs:{text:e.$t("tokens.connect-new"),enabled:""},on:{click:function(t){return e.navigateToTokenSelect()}}}),n("confirmation-dialog",{attrs:{display:e.leaveModalVisible},on:{confirm:function(t){return e.leaveConfirmed()},cancel:function(t){return e.leaveCancelled()}},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n      "+e._s(e.$t("tokens.disconnect-dialog.header"))+"\n    ")]},proxy:!0}])},[e.selectedToken?n("i18n",{attrs:{path:"tokens.disconnect-dialog.confirmation-message",tag:"div"}},[n("b",{attrs:{place:"symbol"}},[e._v(e._s(e.selectedToken.symbol))]),n("span",{staticClass:"connected-tokens__tokens__token__leave__address",attrs:{place:"address"}},[e._v("\n        "+e._s(e.selectedToken.address)+"\n      ")])]):e._e()],1),n("stepper",{attrs:{display:e.loading,steps:e.steps,doneStep:e.doneStep}})],1)},he=[],Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{"justify-center":""}},[n("v-dialog",{attrs:{persistent:"","max-width":"625"},model:{value:e.display,callback:function(t){e.display=t},expression:"display"}},[n("v-card",[n("v-card-title",[n("v-flex",[n("h1",{staticClass:"confirmation-dialog__header"},[e._t("header")],2)])],1),n("v-card-text",[n("p",{staticClass:"confirmation-dialog__message"},[e._t("default")],2)]),n("v-card-actions",[n("v-spacer"),n("v-btn",{staticClass:"confirmation-dialog__button",attrs:{text:""},on:{click:function(t){return e.cancel()}}},[e._v("\n          "+e._s(e.$t("confirmation-dialog.buttons.cancel"))+"\n        ")]),n("v-btn",{staticClass:"confirmation-dialog__button confirmation-dialog__button__primary",attrs:{text:""},on:{click:function(t){return e.confirm()}}},[e._v("\n          "+e._s(e.$t("confirmation-dialog.buttons.confirm"))+"\n        ")]),n("v-spacer")],1)],1)],1)],1)},ve=[],je=function(e){function t(){return Object(o["a"])(this,t),Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),Object(s["a"])(t,[{key:"confirm",value:function(){this.$emit("confirm")}},{key:"cancel",value:function(){this.$emit("cancel")}}]),t}(b["e"]);l["a"]([Object(b["d"])({required:!0})],je.prototype,"display",void 0),je=l["a"]([Object(b["a"])({})],je);var ke=je,ye=ke,ge=(n("8245"),n("b0af")),we=n("99d9"),_e=n("169a"),xe=Object(_["a"])(ye,Oe,ve,!1,null,"013b36dc",null),Ee=xe.exports;E()(xe,{VBtn:G["a"],VCard:ge["a"],VCardActions:we["a"],VCardText:we["b"],VCardTitle:we["c"],VDialog:_e["a"],VFlex:D["a"],VLayout:L["a"],VSpacer:Q["a"]});var Re=n("a1ab"),Ae=n("d0aa"),Ce=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.selectedToken=null,e.leaveModalVisible=!1,e.loading=!1,e.steps=[],e.doneStep=Object(k["d"])(),e}return Object(p["a"])(t,e),Object(s["a"])(t,[{key:"created",value:function(){this.steps=[this.$t("tokens.leave-progress")],this.doneStep=this.$t("tokens.leave-done")}},{key:"dismissModal",value:function(){this.leaveModalVisible=!1,this.selectedToken=null}},{key:"leaveNetwork",value:function(e){this.selectedToken=e,this.leaveModalVisible=!0}},{key:"leaveConfirmed",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.selectedToken.address,this.dismissModal(),this.loading=!0,e.next=5,this.$raiden.leaveNetwork(t);case 5:this.loading=!1;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"leaveCancelled",value:function(){this.dismissModal()}}]),t}(Object(b["c"])(V["a"],q["a"]));Ce=l["a"]([Object(b["a"])({components:{ListHeader:Ae["a"],Stepper:Re["a"],ConfirmationDialog:Ee,ActionButton:N["a"]},computed:Object(O["b"])(["tokens"])})],Ce);var Ne=Ce,Se=Ne,Te=(n("38fc"),n("8860")),Pe=n("56b0"),Ie=n("da13"),De=n("8270"),Me=n("5d23"),Le=Object(_["a"])(Se,me,he,!1,null,"1970fd66",null),Be=Le.exports;E()(Le,{VBtn:G["a"],VFlex:D["a"],VLayout:L["a"],VList:Te["a"],VListGroup:Pe["a"],VListItem:Ie["a"],VListItemAvatar:De["a"],VListItemContent:Me["b"],VListItemSubtitle:Me["c"],VListItemTitle:Me["d"]});var $e=function(e){function t(){return Object(o["a"])(this,t),Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),t}(b["e"]);$e=l["a"]([Object(b["a"])({components:{Tokens:Be}})],$e);var Fe=$e,Ue=Fe,He=Object(_["a"])(Ue,be,fe,!1,null,null,null),Ve=He.exports,We=function(e){function t(){return Object(o["a"])(this,t),Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),t}(b["e"]);We=l["a"]([Object(b["a"])({components:{AppCore:Ve}})],We);var qe=We,Ke=qe,Ze=Object(_["a"])(Ke,pe,le,!1,null,null,null),ze=Ze.exports,Xe=n("f455"),Ye=n("dd61"),Ge=n.n(Ye),Qe=n("e9a8"),Je=n.n(Qe),et=n("b8ce"),tt=n.n(et),nt=n("c5a2"),at=n.n(nt),rt=n("93c6"),ct=n.n(rt);a["a"].use(O["a"]);var it={loading:!0,defaultAccount:"",accountBalance:"0.0",providerDetected:!0,accessDenied:k["a"].UNDEFINED,channels:{},tokens:{},network:k["b"]};function ot(){return tt()(it)}var st={state:ot(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},balance:function(e,t){e.accountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){e.tokens=Object.assign({},t)},network:function(e,t){e.network=t},reset:function(e){Object.assign(e,ot())}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return Ge()(Je()(e.channels),function(n){var a=at()(n,t,Object(k["e"])()),r=e.tokens[a.address];return r&&(a.name=r.name||"",a.symbol=r.symbol||""),a})},allTokens:function(e){return at()(e.tokens,function(e,t,n){var a={address:n,balance:t.balance,decimals:t.decimals,units:t.units,symbol:t.symbol,name:t.name};return e.push(a),e},[])},channels:function(e){return function(t){var n=[],a=e.channels[t];return a&&(n=Je()(a)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return e.network.name||"Chain ".concat(e.network.chainId)},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),a=n.filter(function(e){return e.state===Xe["a"].open});return ct()(a,["capacity"],["desc"])[0]}}}},ut=new O["a"].Store(st);a["a"].use(de["a"]);var dt=function(e,t,n){var a=e.token;return a?Object.keys(n).map(function(e){return n[e].address===a}).includes(!0)?t():t("/"):t()},pt=function(e,t,n){var a=e.params;return dt(a,n,ut.getters.allTokens)},lt=new de["a"]({mode:"history",base:"/",routes:[{path:"/",name:W["a"].HOME,meta:{title:"Raiden dApp"},component:ze},{path:"*",redirect:"/"},{path:"/payment/:token",name:W["a"].PAYMENT,meta:{title:"Send"},component:function(){return Promise.all([n.e("chunk-29cd224d"),n.e("chunk-62d9172b"),n.e("chunk-36408285")]).then(n.bind(null,"1175"))},beforeEnter:pt},{path:"/connect",name:W["a"].SELECT_TOKEN,meta:{title:"Select token"},component:function(){return n.e("chunk-8a9548fc").then(n.bind(null,"7724"))}},{path:"/connect/:token",name:W["a"].SELECT_HUB,meta:{title:"Select hub"},component:function(){return Promise.all([n.e("chunk-29cd224d"),n.e("chunk-8f2e765c")]).then(n.bind(null,"c405"))},beforeEnter:pt},{path:"/connect/:token/:partner",name:W["a"].OPEN_CHANNEL,meta:{title:"Open channel"},component:function(){return Promise.all([n.e("chunk-29cd224d"),n.e("chunk-62d9172b"),n.e("chunk-1ded731d")]).then(n.bind(null,"7542"))},beforeEnter:pt},{path:"/channels/:token",name:W["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-29cd224d"),n.e("chunk-921c0406")]).then(n.bind(null,"3010"))},beforeEnter:pt}]}),bt=lt;ue["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var ft=n("e62e");function mt(e,t){e.prototype.$raiden=new ft["c"](ut)}var ht=n("103a"),Ot=n.n(ht),vt=function(){function e(){Object(o["a"])(this,e),this.cache={}}return Object(s["a"])(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=Ot()(e);return this.cache[e]=n,n}}]),e}();function jt(e,t){e.prototype.$identicon=new vt}n("4917");var kt=n("a925");function yt(){var e=n("49f8"),t={};return e.keys().forEach(function(n){var a=n.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){var r=a[1];t[r]=e(n)}}),t}a["a"].use(kt["a"]);var gt=new kt["a"]({locale:"en",fallbackLocale:"en",messages:yt()}),wt=n("f309");a["a"].use(wt["a"]);var _t=new wt["a"]({icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{primary:"#28A5C8",secondary:"#0A6E87"}}}});a["a"].config.productionTip=!1,a["a"].use(mt),a["a"].use(jt),new a["a"]({vuetify:_t,router:bt,store:ut,created:function(){if(sessionStorage.redirect){var e=sessionStorage.redirect;delete sessionStorage.redirect,this.$router.push(e)}},i18n:gt,render:function(e){return e(se)}}).$mount("#app")},d0aa:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticClass:"list-header"},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"list-header__header"},[e._v(e._s(e.header))]),n("div",{staticClass:"list-header__divider"})])],1)},r=[],c=n("d225"),i=n("308d"),o=n("6bb5"),s=n("4e2b"),u=n("9ab4"),d=n("60a3"),p=function(e){function t(){return Object(c["a"])(this,t),Object(i["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(s["a"])(t,e),t}(d["e"]);u["a"]([Object(d["d"])({required:!0})],p.prototype,"header",void 0),p=u["a"]([Object(d["a"])({})],p);var l=p,b=l,f=(n("73f7"),n("2877")),m=n("6544"),h=n.n(m),O=n("0e8f"),v=n("a722"),j=Object(f["a"])(b,a,r,!1,null,"59800fee",null);t["a"]=j.exports;h()(j,{VFlex:O["a"],VLayout:v["a"]})},e214:function(e){e.exports=[{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"receiver",type:"address"},{name:"sender",type:"address"},{name:"locks",type:"bytes"}],name:"unlock",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"participant1",type:"address"},{name:"participant2",type:"address"},{name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"deprecate",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_max",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"deprecation_executor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"secret_registry",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"chain_id",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token_network_deposit_limit",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"channel_participant_deposit_limit",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant",type:"address"},{name:"total_deposit",type:"uint256"},{name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"channel_counter",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"MAX_SAFE_UINT256",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"contract_address",type:"address"}],name:"contractExists",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"participant",type:"address"},{name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"non_closing_participant",type:"address"},{name:"closing_participant",type:"address"},{name:"balance_hash",type:"bytes32"},{name:"nonce",type:"uint256"},{name:"additional_hash",type:"bytes32"},{name:"non_closing_signature",type:"bytes"},{name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant1",type:"address"},{name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"signature_prefix",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"participant",type:"address"},{name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant1",type:"address"},{name:"participant1_transferred_amount",type:"uint256"},{name:"participant1_locked_amount",type:"uint256"},{name:"participant1_locksroot",type:"bytes32"},{name:"participant2",type:"address"},{name:"participant2_transferred_amount",type:"uint256"},{name:"participant2_locked_amount",type:"uint256"},{name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant",type:"address"},{name:"total_withdraw",type:"uint256"},{name:"expiration_block",type:"uint256"},{name:"participant_signature",type:"bytes"},{name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"safety_deprecation_switch",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"settlement_timeout_min",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"channels",outputs:[{name:"settle_block_number",type:"uint256"},{name:"state",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"channel_identifier",type:"uint256"},{name:"participant",type:"address"},{name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"bool"},{name:"",type:"bytes32"},{name:"",type:"uint256"},{name:"",type:"bytes32"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"channel_identifier",type:"uint256"},{name:"closing_participant",type:"address"},{name:"non_closing_participant",type:"address"},{name:"balance_hash",type:"bytes32"},{name:"nonce",type:"uint256"},{name:"additional_hash",type:"bytes32"},{name:"closing_signature",type:"bytes"},{name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"channel_identifier",type:"uint256"},{name:"sender",type:"address"},{name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{inputs:[{name:"_token_address",type:"address"},{name:"_secret_registry",type:"address"},{name:"_chain_id",type:"uint256"},{name:"_settlement_timeout_min",type:"uint256"},{name:"_settlement_timeout_max",type:"uint256"},{name:"_deprecation_executor",type:"address"},{name:"_channel_participant_deposit_limit",type:"uint256"},{name:"_token_network_deposit_limit",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"participant1",type:"address"},{indexed:!0,name:"participant2",type:"address"},{indexed:!1,name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"participant",type:"address"},{indexed:!1,name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"participant",type:"address"},{indexed:!1,name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"closing_participant",type:"address"},{indexed:!0,name:"nonce",type:"uint256"},{indexed:!1,name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"receiver",type:"address"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"locksroot",type:"bytes32"},{indexed:!1,name:"unlocked_amount",type:"uint256"},{indexed:!1,name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!0,name:"closing_participant",type:"address"},{indexed:!0,name:"nonce",type:"uint256"},{indexed:!1,name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"channel_identifier",type:"uint256"},{indexed:!1,name:"participant1_amount",type:"uint256"},{indexed:!1,name:"participant1_locksroot",type:"bytes32"},{indexed:!1,name:"participant2_amount",type:"uint256"},{indexed:!1,name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"}]},e62e:function(e,t,n){"use strict";var a=n("308d"),r=n("6bb5"),c=n("4e2b"),i=n("f28b"),o=(n("7f7f"),n("5df3"),n("768b")),s=(n("ac6a"),n("96cf"),n("3b8d")),u=n("d225"),d=n("b0b4"),p=n("f455"),l=n("f15c"),b=n("a3d5"),f=n("87a2"),m=n("8404"),h=n("cab6"),O=(n("6b54"),function(){function e(){Object(u["a"])(this,e)}return Object(d["a"])(e,null,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}]),e}());n.d(t,"c",function(){return v}),n.d(t,"b",function(){return y}),n.d(t,"a",function(){return g});var v=function(){function e(t){Object(u["a"])(this,e),this._raiden=void 0,this.store=t}return Object(d["a"])(e,[{key:"updateTokenBalances",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.store.state.tokens,e.t0=regeneratorRuntime.keys(t);case 2:if((e.t1=e.t0()).done){e.next=13;break}if(n=e.t1.value,t.hasOwnProperty(n)){e.next=6;break}return e.abrupt("continue",2);case 6:return a=t[n],e.next=9,this.raiden.getTokenBalance(n);case 9:r=e.sent,t[n]=Object.assign({},a,{balance:r,units:b["a"].toUnits(r,a.decimals)}),e.next=2;break;case 13:this.store.commit("updateTokens",t);case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}}],[{key:"createRaiden",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,e.prev=1,e.next=4,p["b"].create(t,n,window.localStorage);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e["catch"](1),new x(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));function t(t){return e.apply(this,arguments)}return t}()}]),Object(d["a"])(e,[{key:"ensResolve",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new w(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var n,a,r,c,i,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n="/wizard.json",!n){t.next=11;break}return t.next=5,O.fetch(n);case 5:return a=t.sent,t.next=8,l["a"].provider(a);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,l["a"].provider();case 13:r=t.sent;case 14:if(r){t.next=18;break}this.store.commit("noProvider"),t.next=41;break;case 18:if(!a){t.next=24;break}return t.next=21,e.createRaiden(r,a.PRIVATE_KEY);case 21:c=t.sent,t.next=27;break;case 24:return t.next=26,e.createRaiden(r);case 26:c=t.sent;case 27:return this._raiden=c,t.t0=this.store,t.next=31,this.getAccount();case 31:return t.t1=t.sent,t.t0.commit.call(t.t0,"account",t.t1),t.t2=this.store,t.next=36,this.getBalance();case 36:t.t3=t.sent,t.t2.commit.call(t.t2,"balance",t.t3),this.setupEventListeners(c),c.channels$.subscribe(function(e){o.store.commit("updateChannels",e)}),this.store.commit("network",c.network);case 41:t.next=48;break;case 43:t.prev=43,t.t4=t["catch"](0),console.error(t.t4),i=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?f["a"].UNSUPPORTED_NETWORK:t.t4 instanceof x?f["a"].INITIALIZATION_FAILED:f["a"].NO_ACCOUNT,this.store.commit("accessDenied",i);case 48:this.store.commit("loadComplete");case 49:case"end":return t.stop()}},t,this,[[0,43]])}));function n(){return t.apply(this,arguments)}return n}()},{key:"setupEventListeners",value:function(e){var t=this;e.events$.pipe(Object(h["filter"])(function(e){return"raidenShutdown"===e.type})).subscribe(function(){return t.store.commit("reset")}),e.events$.pipe(Object(h["filter"])(function(e){return"newBlock"===e.type})).subscribe(Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.updateTokenBalances();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})))}},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance();case 2:return t=e.sent,e.abrupt("return",b["a"].toEth(t));case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i,s,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return a=e.sent,r=Object(o["a"])(a,2),c=r[0],i=r[1],s=i.decimals,u=i.symbol,d=i.name,e.abrupt("return",{name:d,symbol:u,balance:c,decimals:s,units:b["a"].toUnits(c,s),address:t});case 14:return e.prev=14,e.t0=e["catch"](1),console.error(e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}},e,this,[[1,14]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n,a,r){var c,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return c=function(e,t){r&&r({current:e,total:t})},i=this.raiden,c(1,3),e.prev=3,e.next=6,i.openChannel(t,n);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](3),new y(e.t0);case 11:if(c(2,3),!a.gt(m["Zero"])){e.next=15;break}return e.next=15,this.deposit(t,n,a);case 15:case"end":return e.stop()}},e,this,[[3,8]])}));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"leaveNetwork",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){var a,r,c,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=this.store.getters.channels(t),r={closed:0,failed:0},c=a.length,i=0;case 4:if(!(i<c)){e.next=19;break}return n&&n({current:i+1,total:c}),o=a[i],e.prev=7,e.next=10,this.closeChannel(o.token,o.partner);case 10:r.closed+=1,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),r.failed+=1;case 16:i++,e.next=4;break;case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,this,[[7,13]])}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.closeChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new k(e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.depositChannel(t,n,a);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new g(e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])}));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.settleChannel(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new j(e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokens",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n,a,r,c,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.store.state.tokens,n=0,e.prev=2,e.next=5,this.raiden.getTokenList();case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),a=[];case 11:r=0;case 12:if(!(r<a.length)){e.next=23;break}if(c=a[r],!(c in t)){e.next=16;break}return e.abrupt("continue",20);case 16:return e.next=18,this.getToken(c);case 18:i=e.sent,i&&(t[c]=i,n+=1);case 20:r++,e.next=12;break;case 23:n>0&&this.store.commit("updateTokens",t);case 24:case"end":return e.stop()}},e,this,[[2,8]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n,a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(n);case 3:return e.next=5,this.raiden.transfer(t,n,a);case 5:return r=e.sent,e.next=8,this.raiden.transfers$.pipe(Object(h["first"])(function(e){return e.secrethash===r&&e.completed})).toPromise();case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e["catch"](0),new _(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));function t(t,n,a){return e.apply(this,arguments)}return t}()}]),e}(),j=function(e){function t(){return Object(u["a"])(this,t),Object(a["a"])(this,Object(r["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),t}(Object(i["a"])(Error)),k=function(e){function t(){return Object(u["a"])(this,t),Object(a["a"])(this,Object(r["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),t}(Object(i["a"])(Error)),y=function(e){function t(){return Object(u["a"])(this,t),Object(a["a"])(this,Object(r["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),t}(Object(i["a"])(Error)),g=function(e){function t(){return Object(u["a"])(this,t),Object(a["a"])(this,Object(r["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),t}(Object(i["a"])(Error)),w=function(e){function t(){return Object(u["a"])(this,t),Object(a["a"])(this,Object(r["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),t}(Object(i["a"])(Error)),_=function(e){function t(){return Object(u["a"])(this,t),Object(a["a"])(this,Object(r["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),t}(Object(i["a"])(Error)),x=function(e){function t(){return Object(u["a"])(this,t),Object(a["a"])(this,Object(r["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),t}(Object(i["a"])(Error))},ecc1:function(e,t,n){},edd4:function(e){e.exports={"address-input":{"paste-button":"Paste",input:{placeholder:"Enter an address or ENS name..."},"blockie-alt":"Selected token address blockie",error:{"invalid-address":"Please enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com",empty:"Please enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can't use your own address or the address of the token network."}},"amount-input":{input:{hint:"Please enter an amount"},error:{empty:"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}"}},"app-header":{"copy-success":"Copied!",currency:"ETH"},"channel-actions":{deposit:"Deposit",close:"Close",settle:"Settle"},"channel-deposit":{buttons:{cancel:"Cancel",confirm:"Deposit"},input:{label:"Amount"}},stepper:{steps:{open:{title:"Open",description:"You can deposit more tokens \n or close the channel."},closed:{title:"Closed",description:"Please wait until your channel is settleable. \nhis may take up some time."},settleable:{title:"Settleable",description:"Settle your channel to transfer \n your tokens back to your account."}}},channels:{open:{header:"Open"},closed:{header:"Closed"},settleable:{header:"Settleable"},"snackbar-close":"Close"},"channel-list":{channel:{blockie_alt:"Partner address blockie",state:"Deposit {deposit} | State: {state}",close_dialog:{title:"Close Channel",description:"Are you sure you want to close this channel? This action cannot be undone."},settle_dialog:{title:"Settle Channel",description:"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},messages:{close:{success:"Channel closed successfully",failure:"Channel close failed"},deposit:{success:"Deposit was successful",failure:"Deposit failed"},settle:{success:"Channel settle was successful",failure:"Channel settle failed"}}},confirmation:{buttons:{cancel:"Cancel",close:"Close",settle:"Settle"}},"confirmation-dialog":{buttons:{cancel:"Cancel",confirm:"Confirm"}},"error-screen":{title:"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"splash-screen":{disclaimer:"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can just be used on the Ethereum Testnets.","matrix-sign":"On the first launch you get asked to sign two messages to connect to the Raiden transport layer. You sign the matrix server name and the public user name.","connect-button":"Connect","no-provider":"No web3 provider was detected. Please install e.g. MetaMask"},tokens:{connected:{header:"Connected Tokens",token:{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}",buttons:{pay:"Pay",disconnect:"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{header:"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{label:"Disconnect",title:"Disconnecting from the token network",description:"Closing the channels"},"leave-done":{label:"Done",title:"Disconnected from the token network",description:"All your channels were successfully closed"}},application:{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},payment:{"pay-button":"Send payment","deposit-button":"Deposit","capacity-label":"Capacity","capacity-amount":"{capacity} {token}","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Specify amount...",error:{button:"Dismiss",title:"Payment unsuccessful. Please retry.","deposit-title":"Deposit was unsuccessful. Please retry."},steps:{transfer:{label:"Transfer",title:"Sending Tokens",description:"Please do not close the browser and confirm the transactions with MetaMask."},done:{label:"Done",title:"Send Successful",description:"Your transfer was successful"},deposit:{label:"Deposit",title:"Depositing Tokens",description:"Please do not close the browser and confirm the transactions with MetaMask."},"deposit-done":{label:"Done",title:"Deposit successful",description:"Your tokens have been success"}}},"select-token":{header:"Available",tokens:{token:{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub"},"open-channel":{error:{title:"Ops, something went wrong",button:"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel",hub:"Hub",steps:{open:{label:"Open",title:"Opening a new channel",description:"Please do not close the browser and confirm the transaction with MetaMask."},transfer:{label:"Transfer",title:"Transferring tokens to the network and deposit into the channel",description:"Please do not close the browser and confirm two (2) transactions with MetaMask."},deposit:{label:"Deposit",title:"Not implemented - split title above, when done",description:"Not implemented - split description above, when done"},done:{label:"Done",title:"New Channel opened",description:"A new channel has been opened successfully. You may now select a payment target."}},confirmation:"Channel opening is in progress, are you sure you want to leave?"},"token-information":{title:"Token",description:"{symbol} | {name}"}}},f15c:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n("96cf");var a=n("3b8d"),r=n("d225"),c=n("b0b4"),i=function(){function e(){Object(r["a"])(this,e)}return Object(c["a"])(e,null,[{key:"provider",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,a=null,!t){e.next=6;break}a="https://".concat(t.INFURA_ENDPOINT),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:a=n,e.next=13;break;case 12:window.web3&&(a=window.web3.currentProvider);case 13:return a&&a.isMetaMask&&(a.autoRefreshOnNetworkChange=!1),e.abrupt("return",a);case 15:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}();i.injectedWeb3Available=function(){return window.ethereum||window.web3}},f455:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"newBlock",function(){return Je}),n.d(a,"tokenMonitored",function(){return et}),n.d(a,"channelOpen",function(){return tt}),n.d(a,"channelOpened",function(){return nt}),n.d(a,"channelOpenFailed",function(){return at}),n.d(a,"channelMonitored",function(){return rt}),n.d(a,"channelDeposit",function(){return ct}),n.d(a,"channelDeposited",function(){return it}),n.d(a,"channelDepositFailed",function(){return ot}),n.d(a,"channelWithdrawn",function(){return st}),n.d(a,"channelClose",function(){return ut}),n.d(a,"channelClosed",function(){return dt}),n.d(a,"channelCloseFailed",function(){return pt}),n.d(a,"channelSettleable",function(){return lt}),n.d(a,"channelSettle",function(){return bt}),n.d(a,"channelSettled",function(){return ft}),n.d(a,"channelSettleFailed",function(){return mt});var r={};n.r(r),n.d(r,"matrixSetup",function(){return yt}),n.d(r,"matrixRequestMonitorPresence",function(){return gt}),n.d(r,"matrixPresenceUpdate",function(){return wt}),n.d(r,"matrixRequestMonitorPresenceFailed",function(){return _t}),n.d(r,"matrixRoom",function(){return xt}),n.d(r,"matrixRoomLeave",function(){return Et});var c={};n.r(c),n.d(c,"transfer",function(){return Xt}),n.d(c,"transferSigned",function(){return Yt}),n.d(c,"transferProcessed",function(){return Gt}),n.d(c,"transferSecret",function(){return Qt}),n.d(c,"transferSecretRequest",function(){return Jt}),n.d(c,"transferSecretReveal",function(){return en}),n.d(c,"transferUnlock",function(){return tn}),n.d(c,"transferUnlocked",function(){return nn}),n.d(c,"transferUnlockProcessed",function(){return an}),n.d(c,"transferExpire",function(){return rn}),n.d(c,"transferExpired",function(){return cn}),n.d(c,"transferExpireFailed",function(){return on}),n.d(c,"transferExpireProcessed",function(){return sn}),n.d(c,"transferRefunded",function(){return un}),n.d(c,"transferred",function(){return dn}),n.d(c,"transferFailed",function(){return pn}),n.d(c,"transferClear",function(){return ln}),n.d(c,"withdrawReceiveRequest",function(){return bn}),n.d(c,"withdrawSendConfirmation",function(){return fn});var i={};n.r(i),n.d(i,"messageSend",function(){return wn}),n.d(i,"messageSent",function(){return _n}),n.d(i,"messageReceived",function(){return xn});var o={};n.r(o),n.d(o,"initNewBlockEpic",function(){return Yn}),n.d(o,"initMonitorRegistryEpic",function(){return Gn}),n.d(o,"initMonitorChannelsEpic",function(){return Qn}),n.d(o,"initMonitorProviderEpic",function(){return Jn}),n.d(o,"tokenMonitoredEpic",function(){return ea}),n.d(o,"channelMonitoredEpic",function(){return ta}),n.d(o,"channelOpenEpic",function(){return na}),n.d(o,"channelOpenedEpic",function(){return aa}),n.d(o,"channelDepositEpic",function(){return ra}),n.d(o,"channelCloseEpic",function(){return ca}),n.d(o,"channelSettleEpic",function(){return ia}),n.d(o,"channelSettleableEpic",function(){return oa});var s={};n.r(s),n.d(s,"initMatrixEpic",function(){return Ia}),n.d(s,"matrixStartEpic",function(){return Da}),n.d(s,"matrixShutdownEpic",function(){return Ma}),n.d(s,"matrixMonitorPresenceEpic",function(){return La}),n.d(s,"matrixPresenceUpdateEpic",function(){return Ba}),n.d(s,"matrixCreateRoomEpic",function(){return $a}),n.d(s,"matrixInviteEpic",function(){return Fa}),n.d(s,"matrixHandleInvitesEpic",function(){return Ua}),n.d(s,"matrixLeaveExcessRoomsEpic",function(){return Ha}),n.d(s,"matrixLeaveUnknownRoomsEpic",function(){return Va}),n.d(s,"matrixCleanLeftRoomsEpic",function(){return Wa}),n.d(s,"matrixMessageSendEpic",function(){return qa}),n.d(s,"matrixMessageReceivedEpic",function(){return Ka}),n.d(s,"matrixMessageReceivedUpdateRoomEpic",function(){return Za}),n.d(s,"matrixMonitorChannelPresenceEpic",function(){return za}),n.d(s,"deliveredEpic",function(){return Xa});var u={};n.r(u),n.d(u,"transferGenerateAndSignEnvelopeMessageEpic",function(){return ar}),n.d(u,"transferSignedRetryMessageEpic",function(){return rr}),n.d(u,"transferUnlockedRetryMessageEpic",function(){return cr}),n.d(u,"transferExpiredRetryMessageEpic",function(){return ir}),n.d(u,"transferAutoExpireEpic",function(){return or}),n.d(u,"initQueuePendingEnvelopeMessagesEpic",function(){return sr}),n.d(u,"transferProcessedReceivedEpic",function(){return ur}),n.d(u,"transferSecretRequestedEpic",function(){return dr}),n.d(u,"transferSecretRevealEpic",function(){return pr}),n.d(u,"transferSecretRevealedEpic",function(){return lr}),n.d(u,"transferUnlockProcessedReceivedEpic",function(){return br}),n.d(u,"transferExpireProcessedEpic",function(){return fr}),n.d(u,"transferChannelClosedEpic",function(){return mr}),n.d(u,"transferRefundedEpic",function(){return hr}),n.d(u,"transferReceivedReplyProcessedEpic",function(){return Or}),n.d(u,"withdrawRequestReceivedEpic",function(){return vr}),n.d(u,"withdrawSendConfirmationEpic",function(){return jr});var d=n("bef3"),p=n("3498"),l=n("ffa9"),b=n("8404"),f=n("6ee6"),m=n("6934"),h=n("948b"),O=n("ad02"),v=(n("9152"),n("0627"),n("d225")),j=n("308d"),k=n("6bb5"),y=n("4e2b"),g=(n("c6d9"),n("9749")),w=function(e){return null!==e&&void 0!==e&&"function"===typeof e["toString"]},_=function(e){return e&&"BigNumber"===e["_ethersType"]},x=new d["a"]("BigNumber",_,function(e,t){if(_(e))return d["n"](e);try{if(w(e))return d["n"](Object(m["bigNumberify"])(e.toString()))}catch(n){return d["e"](e,t,n.message)}return d["e"](e,t)},function(e){return new O["LosslessNumber"](e.toString())}),E=function(e){function t(e,n){var a;return Object(v["a"])(this,t),a=Object(j["a"])(this,Object(k["a"])(t).call(this,n||"enum",function(e){return Object.values(a.enumObject).some(function(t){return t===e})},function(e,t){return a.is(e)?d["n"](e):d["e"](e,t)},d["f"])),a._tag="EnumType",a.enumObject=e,a}return Object(y["a"])(t,e),t}(d["a"]),R=Object(g["memoize"])(function(e){return d["d"](d["m"],function(t){return"string"===typeof t&&(e?Object(m["hexDataLength"])(t)===e:Object(m["isHexString"])(t))},"HexString")}),A=Object(g["memoize"])(function(e){var t=e?b["Two"].pow(8*e):void 0;return d["d"](x,function(e){return x.is(e)&&e.gte(0)&&(void 0===t||e.lt(t))},"UInt")}),C=R(65),N=R(32),S=R(),T=R(32),P=d["d"](R(20),function(e){try{return"string"===typeof e&&Object(m["getAddress"])(e)===e}catch(t){}return!1},"Address"),I=Object(g["memoize"])(function(e){return d["o"]([d["i"],e])});function D(e){return[Date.now(),e]}function M(e,t){var n;if("number"===typeof e&&(e=Object(m["bigNumberify"])(e)),x.is(e)){if(e.lt(0))throw new Error("Number is negative");if(e.gte(b["Two"].pow(8*t)))throw new Error("Number too large");n=Object(h["hexZeroPad"])(Object(h["hexlify"])(e),t)}else{if("string"!==typeof e&&!Object(h["isArrayish"])(e))throw new Error("data is not a HexString or Uint8Array");var a=Object(h["hexlify"])(e);if(Object(h["hexDataLength"])(a)!==t)throw new Error("Uint8Array or hex string must be of exact length");n=a}return n}var L=function(e){return e&&!0===e["isLosslessNumber"]};function B(e){return Object(O["parse"])(e,function(e,t){if(Object(f["a"])(e),L(t))try{return t.valueOf()}catch(n){}return t})}var $,F=d["p"]({amount:A(32),expiration:A(32),secrethash:N},"Lock"),U=d["p"]({chainId:A(32),tokenNetworkAddress:P,channelId:A(32),nonce:A(8),transferredAmount:A(32),lockedAmount:A(32),locksroot:N,messageHash:N,signature:C,sender:P});(function(e){e["opening"]="opening",e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"})($||($={}));new E($,"ChannelState");var H,V,W=d["k"](d["g"]([d["p"]({deposit:A(32)}),d["j"]({locks:d["b"](F),balanceProof:U,withdraw:A(32)})])),q=d["g"]([d["k"](d["p"]({own:W,partner:W})),d["q"]([d["k"](d["p"]({state:d["h"]($.opening)})),d["k"](d["p"]({state:d["q"]([d["h"]($.open),d["h"]($.closing)]),id:d["i"],settleTimeout:d["i"],openBlock:d["i"],isFirstParticipant:d["c"]})),d["k"](d["p"]({state:d["q"]([d["h"]($.closed),d["h"]($.settleable),d["h"]($.settling)]),id:d["i"],settleTimeout:d["i"],openBlock:d["i"],isFirstParticipant:d["c"],closeBlock:d["i"]}))])]),K=d["k"](d["l"](d["m"],d["k"](d["l"](d["m"],q)))),Z=d["k"](d["p"]({userId:d["m"],accessToken:d["m"],deviceId:d["m"],displayName:d["m"]})),z=n("bd86");(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["TO_DEVICE"]="ToDevice",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired"})(V||(V={}));var X,Y=new E(V,"MessageType"),G=d["k"](d["p"]({type:Y})),Q=d["k"](d["g"]([d["p"]({message_identifier:A(8)}),G])),J=d["k"](d["g"]([d["p"]({type:d["h"](V.DELIVERED),delivered_message_identifier:A(8)}),G])),ee=d["k"](d["g"]([d["p"]({type:d["h"](V.PROCESSED)}),Q])),te=d["k"](d["g"]([d["p"]({type:d["h"](V.SECRET_REQUEST),payment_identifier:A(8),secrethash:N,amount:A(32),expiration:A(32)}),Q])),ne=d["k"](d["g"]([d["p"]({type:d["h"](V.SECRET_REVEAL),secret:S}),Q])),ae=d["k"](d["g"]([d["p"]({chain_id:A(32),token_network_address:P,channel_identifier:A(32),nonce:A(8),transferred_amount:A(32),locked_amount:A(32),locksroot:N}),Q])),re=d["k"](d["p"]({route:d["b"](P)})),ce=d["k"](d["p"]({routes:d["b"](re)})),ie=d["k"](d["g"]([d["p"]({payment_identifier:A(8),token:P,recipient:P,lock:F,target:P,initiator:P,fee:A(32),metadata:ce}),ae])),oe=d["k"](d["g"]([d["p"]({type:d["h"](V.LOCKED_TRANSFER)}),ie])),se=d["k"](d["g"]([d["p"]({type:d["h"](V.REFUND_TRANSFER)}),ie])),ue=d["k"](d["g"]([d["p"]({type:d["h"](V.UNLOCK),payment_identifier:A(8),secret:S}),ae])),de=d["k"](d["g"]([d["p"]({type:d["h"](V.LOCK_EXPIRED),recipient:P,secrethash:N}),ae])),pe=d["k"](d["g"]([d["p"]({type:d["h"](V.TO_DEVICE),message_identifier:A(8)}),G])),le=d["k"](d["p"]({chain_id:A(32),token_network_address:P,channel_identifier:A(32),participant:P,total_withdraw:A(32),nonce:A(8),expiration:A(32)})),be=d["k"](d["g"]([d["p"]({type:d["h"](V.WITHDRAW_REQUEST)}),le,Q])),fe=d["k"](d["g"]([d["p"]({type:d["h"](V.WITHDRAW_CONFIRMATION)}),le,Q])),me=d["k"](d["g"]([d["p"]({type:d["h"](V.WITHDRAW_EXPIRED)}),le,Q])),he=Object(g["memoize"])(function(e){return d["g"]([e,d["k"](d["p"]({signature:C}))])}),Oe=(H={},Object(z["a"])(H,V.DELIVERED,he(J)),Object(z["a"])(H,V.PROCESSED,he(ee)),Object(z["a"])(H,V.SECRET_REQUEST,he(te)),Object(z["a"])(H,V.SECRET_REVEAL,he(ne)),Object(z["a"])(H,V.LOCKED_TRANSFER,he(oe)),Object(z["a"])(H,V.REFUND_TRANSFER,he(se)),Object(z["a"])(H,V.UNLOCK,he(ue)),Object(z["a"])(H,V.LOCK_EXPIRED,he(de)),Object(z["a"])(H,V.TO_DEVICE,he(pe)),Object(z["a"])(H,V.WITHDRAW_REQUEST,he(be)),Object(z["a"])(H,V.WITHDRAW_CONFIRMATION,he(fe)),Object(z["a"])(H,V.WITHDRAW_EXPIRED,he(me)),H),ve=d["k"](d["g"]([d["p"]({transfer:I(he(oe))}),d["j"]({transferProcessed:I(he(ee)),refund:I(he(se)),channelClosed:I(N),secretReveal:I(he(ne)),unlock:I(he(ue)),lockExpired:I(he(de)),unlockProcessed:I(he(ee)),lockExpiredProcessed:I(he(ee))})])),je=d["k"](d["l"](d["m"],ve));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["revealed"]="REVEALED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(X||(X={}));var ke=d["k"](d["p"]({address:P,chainId:d["i"],registry:P,blockNumber:d["i"],channels:K,tokens:d["k"](d["l"](d["m"],P)),transport:d["k"](d["j"]({matrix:d["k"](d["g"]([d["p"]({server:d["m"]}),d["j"]({setup:Z,rooms:d["k"](d["l"](d["m"],d["b"](d["m"])))})]))})),secrets:d["k"](d["l"](d["m"],d["k"](d["g"]([d["p"]({secret:S}),d["j"]({registerBlock:d["i"]})])))),sent:je}));function ye(e){return Object(O["stringify"])(ke.encode(e),void 0,2)}function ge(e){"string"===typeof e&&(e=B(e));var t=ke.decode(e);if(Object(p["isLeft"])(t))throw l["ThrowReporter"].report(t);return t.right}var we,_e={address:b["AddressZero"],chainId:0,registry:b["AddressZero"],blockNumber:0,channels:{},tokens:{},transport:{},secrets:{},sent:{}},xe=Object(m["padZeros"])([],65);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(we||(we={}));n("5979"),n("5b9d"),n("88f4"),n("6dbf"),n("7793"),n("cf20");var Ee=n("768b"),Re=(n("dc44"),n("a039"),n("b0b4")),Ae=n("e7ea"),Ce=n("ddfd"),Ne=n("686e"),Se=n("7508"),Te=n("733d"),Pe=n("7442"),Ie=(n("371e"),n("ff97")),De=n("6aa5"),Me=n("eec8"),Le=n("a1c0"),Be=n("f791"),$e=n("e102"),Fe=n("7fdb"),Ue=n("ac72"),He=n("3a71"),Ve=n("7b32"),We=n("38f3"),qe=n("e214"),Ke=n("a06c"),Ze=n("a0df"),ze=n("31a7"),Xe=n("1042"),Ye=n("c998"),Ge=n("0b23");function Qe(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var r in e){var c=e[r];if(c){var i=n[r]||t[r],o=c(i,a);o!==i&&(n=Object.assign({},n,Object(z["a"])({},r,o)))}}return n}}var Je=Object(Pe["createStandardAction"])("newBlock")(),et=Object(Pe["createStandardAction"])("tokenMonitored")(),tt=Object(Pe["createStandardAction"])("channelOpen")(),nt=Object(Pe["createStandardAction"])("channelOpened")(),at=Object(Pe["createStandardAction"])("channelOpenFailed").map(function(e,t){return{payload:e,error:!0,meta:t}}),rt=Object(Pe["createStandardAction"])("channelMonitored")(),ct=Object(Pe["createStandardAction"])("channelDeposit")(),it=Object(Pe["createStandardAction"])("channelDeposited")(),ot=Object(Pe["createStandardAction"])("channelDepositFailed").map(function(e,t){return{payload:e,error:!0,meta:t}}),st=Object(Pe["createStandardAction"])("channelWithdrawn")(),ut=Object(Pe["createStandardAction"])("channelClose")(),dt=Object(Pe["createStandardAction"])("channelClosed")(),pt=Object(Pe["createStandardAction"])("channelCloseFailed").map(function(e,t){return{payload:e,error:!0,meta:t}}),lt=Object(Pe["createStandardAction"])("channelSettleable")(),bt=Object(Pe["createStandardAction"])("channelSettle")(),ft=Object(Pe["createStandardAction"])("channelSettled")(),mt=Object(Pe["createStandardAction"])("channelSettleFailed").map(function(e,t){return{payload:e,error:!0,meta:t}});function ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e.blockNumber,t=arguments.length>1?arguments[1]:void 0;return Object(Pe["isActionOf"])(Je,t)?t.payload.blockNumber:e}function Ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e.tokens,t=arguments.length>1?arguments[1]:void 0;return Object(Pe["isActionOf"])(et,t)?Object(Ge["set"])([t.payload.token],t.payload.tokenNetwork,e):e}function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e.channels,t=arguments.length>1?arguments[1]:void 0;if(Object(Pe["isActionOf"])(tt,t)){var n=[t.meta.tokenNetwork,t.meta.partner];if(Object(Ge["get"])(n,e))return e;var a={state:$.opening,own:{deposit:b["Zero"]},partner:{deposit:b["Zero"]}};return Object(Ge["set"])(n,a,e)}if(Object(Pe["isActionOf"])(nt,t)){var r=[t.meta.tokenNetwork,t.meta.partner],c={state:$.open,own:{deposit:b["Zero"]},partner:{deposit:b["Zero"]},id:t.payload.id,settleTimeout:t.payload.settleTimeout,openBlock:t.payload.openBlock,isFirstParticipant:t.payload.isFirstParticipant};return Object(Ge["set"])(r,c,e)}if(Object(Pe["isActionOf"])(at,t)){var i=[t.meta.tokenNetwork,t.meta.partner];return Object(Ge["get"])([].concat(i,["state"]),e)!==$.opening?e:Object(Ge["unset"])(i,e)}if(Object(Pe["isActionOf"])(it,t)){var o=[t.meta.tokenNetwork,t.meta.partner],s=Object(Ge["get"])(o,e);return s&&s.state===$.open&&s.id===t.payload.id?(s=t.payload.participant===t.meta.partner?Object.assign({},s,{partner:Object.assign({},s.partner,{deposit:t.payload.totalDeposit})}):Object.assign({},s,{own:Object.assign({},s.own,{deposit:t.payload.totalDeposit})}),Object(Ge["set"])(o,s,e)):e}if(Object(Pe["isActionOf"])(st,t)){var u=[t.meta.tokenNetwork,t.meta.partner],d=Object(Ge["get"])(u,e);return d&&d.state===$.open&&d.id===t.payload.id?(d=t.payload.participant===t.meta.partner?Object.assign({},d,{partner:Object.assign({},d.partner,{withdraw:t.payload.totalWithdraw})}):Object.assign({},d,{own:Object.assign({},d.own,{withdraw:t.payload.totalWithdraw})}),Object(Ge["set"])(u,d,e)):e}if(Object(Pe["isActionOf"])(ut,t)){var p=[t.meta.tokenNetwork,t.meta.partner],l=Object(Ge["get"])(p,e);return l&&l.state===$.open?(l=Object.assign({},l,{state:$.closing}),Object(Ge["set"])(p,l,e)):e}if(Object(Pe["isActionOf"])(dt,t)){var f=[t.meta.tokenNetwork,t.meta.partner],m=Object(Ge["get"])(f,e);return!m||m.state!==$.open&&m.state!==$.closing||m.id!==t.payload.id?e:(m=Object.assign({},m,{state:$.closed,closeBlock:t.payload.closeBlock}),Object(Ge["set"])(f,m,e))}if(Object(Pe["isActionOf"])(lt,t)){var h=[t.meta.tokenNetwork,t.meta.partner],O=Object(Ge["get"])(h,e);return O&&O.state===$.closed?(O=Object.assign({},O,{state:$.settleable}),Object(Ge["set"])(h,O,e)):e}if(Object(Pe["isActionOf"])(bt,t)){var v=[t.meta.tokenNetwork,t.meta.partner],j=Object(Ge["get"])(v,e);return j&&j.state===$.settleable?(j=Object.assign({},j,{state:$.settling}),Object(Ge["set"])(v,j,e)):e}if(Object(Pe["isActionOf"])(ft,t)){var k=[t.meta.tokenNetwork,t.meta.partner],y=Object(Ge["get"])(k,e);return y&&[$.closed,$.settleable,$.settling].includes(y.state)?Object(Ge["unset"])(k,e):e}return e}var jt=Qe({blockNumber:ht,tokens:Ot,channels:vt},_e),kt=n("75fc"),yt=Object(Pe["createStandardAction"])("matrixSetup")(),gt=Object(Pe["createStandardAction"])("matrixRequestMonitorPresence")(),wt=Object(Pe["createStandardAction"])("matrixPresenceUpdate").map(function(e,t){var n=e.userId,a=e.available,r=e.ts;return{payload:{userId:n,available:a,ts:r||Date.now()},meta:t}}),_t=Object(Pe["createStandardAction"])("matrixRequestMonitorPresenceFailed").map(function(e,t){return{payload:e,error:!0,meta:t}}),xt=Object(Pe["createStandardAction"])("matrixRoom")(),Et=Object(Pe["createStandardAction"])("matrixRoomLeave")();function Rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e.transport,t=arguments.length>1?arguments[1]:void 0;if(Object(Pe["isActionOf"])(yt,t))return Object.assign({},e,{matrix:Object.assign({},e.matrix,t.payload)});if(Object(Pe["isActionOf"])(xt,t)){var n=["matrix","rooms",t.meta.address];return Object(Ge["set"])(n,[t.payload.roomId].concat(Object(kt["a"])(Object(Ge["getOr"])([],n,e).filter(function(e){return e!==t.payload.roomId}))),e)}if(Object(Pe["isActionOf"])(Et,t)){var a=["matrix","rooms",t.meta.address];return e=Object(Ge["set"])(a,Object(Ge["getOr"])([],a,e).filter(function(e){return e!==t.payload.roomId}),e),Object(Ge["isEmpty"])(Object(Ge["get"])(a,e))&&(e=Object(Ge["unset"])(a,e)),e}return e}var At,Ct=Qe({transport:Rt},_e);n("0709"),n("d479");function Nt(e){var t=[],n=!0,a=!1,r=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var o=c.value;t.push(M(o.expiration,32),M(o.amount,32),o.secrethash)}}catch(s){a=!0,r=s}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return Object(m["keccak256"])(Object(h["concat"])(t))}function St(e){return Object(m["sha256"])(e)}function Tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(h["hexlify"])(Object(m["randomBytes"])(e))}function Pt(){return Object(m["bigNumberify"])(Object(m["randomBytes"])(8))}function It(){return Object(m["bigNumberify"])(Date.now())}function Dt(e){var t=e.lockExpiredProcessed?[X.expired,e.lockExpiredProcessed[0]]:e.unlockProcessed?[X.unlocked,e.unlockProcessed[0]]:e.lockExpired?[X.expiring,e.lockExpired[0]]:e.unlock?[X.unlocking,e.unlock[0]]:e.secretReveal?[X.revealed,e.secretReveal[0]]:e.channelClosed?[X.closed,e.channelClosed[0]]:e.refund?[X.refunded,e.refund[0]]:e.transferProcessed?[X.received,e.transferProcessed[0]]:[X.pending,e.transfer[0]],n=Object(Ee["a"])(t,2),a=n[0],r=n[1],c=!(!e.secretReveal&&!e.unlock)||!(e.refund||e.lockExpired||e.channelClosed)&&void 0,i=!!(e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed);return{secrethash:e.transfer[1].lock.secrethash,status:a,initiator:e.transfer[1].initiator,recipient:e.transfer[1].recipient,target:e.transfer[1].target,paymentId:e.transfer[1].payment_identifier,chainId:e.transfer[1].chain_id.toNumber(),token:e.transfer[1].token,tokenNetwork:e.transfer[1].token_network_address,channelId:e.transfer[1].channel_identifier,amount:e.transfer[1].lock.amount,expirationBlock:e.transfer[1].lock.expiration.toNumber(),fee:e.transfer[1].fee,startedAt:new Date(e.transfer[0]),changedAt:new Date(r),success:c,completed:i}}var Mt,Lt=function(e,t,n,a){return new(n||(n=Promise))(function(r,c){function i(e){try{s(a.next(e))}catch(t){c(t)}}function o(e){try{s(a["throw"](e))}catch(t){c(t)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,o)}s((a=a.apply(e,t||[])).next())})},Bt=(At={},Object(z["a"])(At,V.DELIVERED,12),Object(z["a"])(At,V.PROCESSED,0),Object(z["a"])(At,V.SECRET_REQUEST,3),Object(z["a"])(At,V.SECRET_REVEAL,11),Object(z["a"])(At,V.LOCKED_TRANSFER,7),Object(z["a"])(At,V.REFUND_TRANSFER,8),Object(z["a"])(At,V.UNLOCK,4),Object(z["a"])(At,V.LOCK_EXPIRED,13),Object(z["a"])(At,V.TO_DEVICE,14),Object(z["a"])(At,V.WITHDRAW_REQUEST,15),Object(z["a"])(At,V.WITHDRAW_CONFIRMATION,16),Object(z["a"])(At,V.WITHDRAW_EXPIRED,17),At);function $t(e){var t=e.routes.map(function(e){return Object(m["keccak256"])(m["RLP"].encode(e.route))});return Object(m["keccak256"])(m["RLP"].encode(t))}function Ft(e,t,n){return e.isZero()&&t.isZero()&&n===b["HashZero"]?b["HashZero"]:Object(m["keccak256"])(Object(h["concat"])([M(e,32),M(t,32),M(n,32)]))}function Ut(e){switch(e.type){case V.LOCKED_TRANSFER:case V.REFUND_TRANSFER:var t=Object(h["concat"])([M(Bt[e.type],1),M(e.message_identifier,8),M(e.payment_identifier,8),M(e.lock.expiration,32),M(e.token,20),M(e.recipient,20),M(e.target,20),M(e.initiator,20),M(e.lock.secrethash,32),M(e.lock.amount,32),M(e.fee,32)]);return e.type===V.LOCKED_TRANSFER&&(t=Object(h["concat"])([t,$t(e.metadata)])),Object(m["keccak256"])(t);case V.UNLOCK:return Object(m["keccak256"])(Object(h["concat"])([M(Bt[e.type],1),M(e.message_identifier,8),M(e.payment_identifier,8),M(e.secret,32)]));case V.LOCK_EXPIRED:return Object(m["keccak256"])(Object(h["concat"])([M(Bt[e.type],1),M(e.message_identifier,8),M(e.recipient,20),M(e.secrethash,32)]))}}function Ht(e){switch(e.type){case V.DELIVERED:return Object(h["hexlify"])(Object(h["concat"])([M(Bt[e.type],1),M(0,3),M(e.delivered_message_identifier,8)]));case V.PROCESSED:return Object(h["hexlify"])(Object(h["concat"])([M(Bt[e.type],1),M(0,3),M(e.message_identifier,8)]));case V.LOCKED_TRANSFER:case V.REFUND_TRANSFER:case V.UNLOCK:case V.LOCK_EXPIRED:var t=Ut(e),n=Ft(e.transferred_amount,e.locked_amount,e.locksroot);return Object(h["hexlify"])(Object(h["concat"])([M(e.token_network_address,20),M(e.chain_id,32),M(Mt.BALANCE_PROOF,32),M(e.channel_identifier,32),M(n,32),M(e.nonce,32),M(t,32)]));case V.SECRET_REQUEST:return Object(h["hexlify"])(Object(h["concat"])([M(Bt[e.type],1),M(0,3),M(e.message_identifier,8),M(e.payment_identifier,8),M(e.secrethash,32),M(e.amount,32),M(e.expiration,32)]));case V.SECRET_REVEAL:return Object(h["hexlify"])(Object(h["concat"])([M(Bt[e.type],1),M(0,3),M(e.message_identifier,8),M(e.secret,32)]));case V.TO_DEVICE:return Object(h["hexlify"])(Object(h["concat"])([M(Bt[e.type],1),M(0,3),M(e.message_identifier,8)]));case V.WITHDRAW_REQUEST:case V.WITHDRAW_EXPIRED:case V.WITHDRAW_CONFIRMATION:return Object(h["hexlify"])(Object(h["concat"])([M(e.token_network_address,20),M(e.chain_id,32),M(Mt.WITHDRAW,32),M(e.channel_identifier,32),M(e.participant,20),M(e.total_withdraw,32),M(e.expiration,32)]))}}function Vt(e){return C.is(e.signature)}function Wt(e){return Object(m["verifyMessage"])(Object(h["arrayify"])(Ht(e)),e.signature)}function qt(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,messageHash:Ut(e),signature:e.signature,sender:Wt(e)}}function Kt(e){var t=Oe[e.type];return Object(O["stringify"])(t.encode(e))}function Zt(e){var t=B(e);if(!G.is(t))throw new Error('Could not find Message "type" in '.concat(e));var n=Oe[t.type].decode(t);if(Object(p["isLeft"])(n))throw l["ThrowReporter"].report(n);return n.right}function zt(e,t){return Lt(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!Vt(t)){n.next=2;break}return n.abrupt("return",t);case 2:return n.next=4,e.signMessage(Object(h["arrayify"])(Ht(t)));case 4:return a=n.sent,n.abrupt("return",Object.assign({},t,{signature:a}));case 6:case"end":return n.stop()}},n)}))}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["WITHDRAW"]=3]="WITHDRAW"})(Mt||(Mt={}));var Xt=Object(Pe["createStandardAction"])("transfer")(),Yt=Object(Pe["createStandardAction"])("transferSigned")(),Gt=Object(Pe["createStandardAction"])("transferProcessed")(),Qt=Object(Pe["createStandardAction"])("transferSecret")(),Jt=Object(Pe["createStandardAction"])("transferSecretRequest")(),en=Object(Pe["createStandardAction"])("transferSecretReveal")(),tn=Object(Pe["createStandardAction"])("transferUnlock")(),nn=Object(Pe["createStandardAction"])("transferUnlocked")(),an=Object(Pe["createStandardAction"])("transferUnlockProcessed")(),rn=Object(Pe["createStandardAction"])("transferExpire")(),cn=Object(Pe["createStandardAction"])("transferExpired")(),on=Object(Pe["createStandardAction"])("transferExpireFailed").map(function(e,t){return{payload:e,error:!0,meta:t}}),sn=Object(Pe["createStandardAction"])("transferExpireProcessed")(),un=Object(Pe["createStandardAction"])("transferRefunded")(),dn=Object(Pe["createStandardAction"])("transferred")(),pn=Object(Pe["createStandardAction"])("transferFailed").map(function(e,t){return{payload:e,error:!0,meta:t}}),ln=Object(Pe["createStandardAction"])("transferClear")(),bn=Object(Pe["createStandardAction"])("withdrawReceiveRequest")(),fn=Object(Pe["createStandardAction"])("withdrawSendConfirmation")();function mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;if(Object(Pe["isActionOf"])(Qt,t))return t.meta.secrethash in e.secrets&&e.secrets[t.meta.secrethash].registerBlock?e:Object.assign({},e,{secrets:Object.assign({},e.secrets,Object(z["a"])({},t.meta.secrethash,t.payload))});if(Object(Pe["isActionOf"])(Yt,t)){var n=t.payload.message,a=n.lock,r=a.secrethash;if(r in e.sent)return e;var c=["channels",n.token_network_address,n.recipient],i=Object(Ge["get"])(c,e);if(!i)return e;var o=[].concat(Object(kt["a"])(i.own.locks||[]),[a]),s=Nt(o);if(n.locksroot!==s||!n.nonce.eq((i.own.balanceProof?i.own.balanceProof.nonce:b["Zero"]).add(1))||!n.transferred_amount.eq(i.own.balanceProof?i.own.balanceProof.transferredAmount:b["Zero"])||!n.locked_amount.eq((i.own.balanceProof?i.own.balanceProof.lockedAmount:b["Zero"]).add(a.amount)))return e;i=Object.assign({},i,{own:Object.assign({},i.own,{locks:o,balanceProof:qt(n)})});var u={transfer:D(n)};return e=Object(Ge["set"])(c,i,e),e=Object(Ge["set"])(["sent",r],u,e),e}if(Object(Pe["isActionOf"])(Gt,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,Object(z["a"])({},t.meta.secrethash,Object.assign({},e.sent[t.meta.secrethash],{transferProcessed:D(t.payload.message)})))}):e;if(Object(Pe["isActionOf"])(en,t))return t.meta.secrethash in e.sent&&!e.sent[t.meta.secrethash].secretReveal?Object.assign({},e,{sent:Object.assign({},e.sent,Object(z["a"])({},t.meta.secrethash,Object.assign({},e.sent[t.meta.secrethash],{secretReveal:D(t.payload.message)})))}):e;if(Object(Pe["isActionOf"])(nn,t)){var d=t.payload.message,p=t.meta.secrethash;if(!(p in e.sent)||e.sent[p].unlock)return e;var l=e.sent[p].transfer[1],f=l.lock,h=["channels",l.token_network_address,l.recipient],O=Object(Ge["get"])(h,e);if(!O||!O.own.locks||!O.own.balanceProof)return e;var v=O.own.locks.filter(function(e){return e.secrethash!==p}),j=Nt(v);if(d.locksroot!==j||!O.own.balanceProof.nonce.add(1).eq(d.nonce)||!d.transferred_amount.eq(O.own.balanceProof.transferredAmount.add(f.amount))||!d.locked_amount.eq(O.own.balanceProof.lockedAmount.sub(f.amount)))return e;O=Object.assign({},O,{own:Object.assign({},O.own,{locks:v,balanceProof:qt(d)})});var k=Object.assign({},e.sent[p],{unlock:D(d)});return e=Object(Ge["set"])(h,O,e),e=Object(Ge["set"])(["sent",p],k,e),e}if(Object(Pe["isActionOf"])(cn,t)){var y=t.payload.message,g=t.meta.secrethash;if(!(g in e.sent)||e.sent[g].unlock||e.sent[g].lockExpired)return e;var w=e.sent[g].transfer[1],_=w.lock,x=["channels",w.token_network_address,w.recipient],E=Object(Ge["get"])(x,e);if(!E||!E.own.locks||!E.own.balanceProof)return e;var R=E.own.locks.filter(function(e){return e.secrethash!==g}),A=Nt(R);if(y.locksroot!==A||!E.own.balanceProof.nonce.add(1).eq(y.nonce)||!y.transferred_amount.eq(E.own.balanceProof.transferredAmount)||!y.locked_amount.eq(E.own.balanceProof.lockedAmount.sub(_.amount)))return e;E=Object.assign({},E,{own:Object.assign({},E.own,{locks:R,balanceProof:qt(y)})});var C=Object.assign({},e.sent[g],{lockExpired:D(y)});return e=Object(Ge["set"])(x,E,e),e=Object(Ge["set"])(["sent",g],C,e),e}if(Object(Pe["isActionOf"])(an,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,Object(z["a"])({},t.meta.secrethash,Object.assign({},e.sent[t.meta.secrethash],{unlockProcessed:D(t.payload.message)})))}):e;if(Object(Pe["isActionOf"])(sn,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,Object(z["a"])({},t.meta.secrethash,Object.assign({},e.sent[t.meta.secrethash],{lockExpiredProcessed:D(t.payload.message)})))}):e;if(Object(Pe["isActionOf"])(un,t))return t.meta.secrethash in e.sent?Object.assign({},e,{sent:Object.assign({},e.sent,Object(z["a"])({},t.meta.secrethash,Object.assign({},e.sent[t.meta.secrethash],{refund:D(t.payload.message)})))}):e;if(Object(Pe["isActionOf"])(dt,t))return Object.assign({},e,{sent:Object(Ge["mapValues"])(function(e){return e.transfer[1].channel_identifier.eq(t.payload.id)&&e.transfer[1].recipient===t.meta.partner&&e.transfer[1].token_network_address===t.meta.tokenNetwork?Object.assign({},e,{channelClosed:D(t.payload.txHash)}):e})(e.sent)});if(Object(Pe["isActionOf"])(ln,t))return t.meta.secrethash in e.sent?(e=Object(Ge["unset"])(["sent",t.meta.secrethash],e),e=Object(Ge["unset"])(["secrets",t.meta.secrethash],e),e):e;if(Object(Pe["isActionOf"])(fn,t)){var N=t.payload.message,S=["channels",t.meta.tokenNetwork,t.meta.partner],T=Object(Ge["get"])(S,e);if(!T||T.state!==$.open)return e;var P=T.own.balanceProof||{chainId:N.chain_id,tokenNetworkAddress:t.meta.tokenNetwork,channelId:N.channel_identifier,nonce:b["Zero"],transferredAmount:b["Zero"],lockedAmount:b["Zero"],locksroot:b["HashZero"],messageHash:b["HashZero"],signature:Object(m["hexlify"])(xe),sender:e.address};return N.nonce.eq(P.nonce.add(1))&&N.expiration.gt(e.blockNumber)&&(T=Object.assign({},T,{own:Object.assign({},T.own,{balanceProof:Object.assign({},P,{nonce:N.nonce})})}),e=Object(Ge["set"])(S,T,e)),e}return e}var hn={channelsReducer:jt,transportReducer:Ct,transfersReducer:mn},On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;return Object.values(hn).reduce(function(e,n){return n(e,t)},e)},vn=n("3c89"),jn=n("379c"),kn=n("99e6"),yn=n("446c"),gn=n("1c03"),wn=Object(Pe["createStandardAction"])("messageSend")(),_n=Object(Pe["createStandardAction"])("messageSent")(),xn=Object(Pe["createStandardAction"])("messageReceived").map(function(e,t){var n=e.text,a=e.message,r=e.ts,c=e.userId,i=e.roomId;return{payload:{text:n,message:a,ts:r||Date.now(),userId:c,roomId:i},meta:t}}),En=Object(Pe["createStandardAction"])("raidenShutdown")(),Rn=Object.assign({raidenShutdown:En},a,r,i,c),An=Object(g["pick"])(Rn,[Rn.raidenShutdown,Rn.newBlock,Rn.matrixPresenceUpdate].map(Pe["getType"])),Cn=n("649d"),Nn=n("1a65"),Sn=n("5580"),Tn=n("ee13"),Pn=n("0815"),In=n("e418"),Dn=n("7182"),Mn=n("b66b"),Ln=n("8012c"),Bn=n("d193"),$n=n("6f0b"),Fn=n("8753"),Un=n("a3fa"),Hn=n("06d2"),Vn=function(e,t,n,a){return new(n||(n=Promise))(function(r,c){function i(e){try{s(a.next(e))}catch(t){c(t)}}function o(e){try{s(a["throw"](e))}catch(t){c(t)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,o)}s((a=a.apply(e,t||[])).next())})};function Wn(e,t,n){return Object(Fn["a"])(function(n){return e.on(t,n)},function(n){return e.removeListener(t,n)},n)}function qn(e,t,n,a){var r=e.provider,c=Sn["a"];n&&a&&(c=Object(Un["a"])(n,Object(Hn["a"])(function(){return r.blockNumber?Object(vn["a"])(r.blockNumber):a})).pipe(Object(Ve["a"])(),Object(In["a"])(function(e){var n=Object(Ee["a"])(e,2),a=n[0],c=n[1];return Promise.all(t.map(function(e){return r.getLogs(Object.assign({},e,{fromBlock:a,toBlock:c}))}))}),Object(yn["a"])(function(e){return Object(Me["a"])(Object(g["sortBy"])(Object(g["flatten"])(e),["blockNumber"]))}),Object(Be["a"])(function(t){var n=e.interface.parseLog(t);if(n){var a=Array.prototype.slice.call(n.values),c=Object.assign({},t,n,{args:a,removeListener:function(){},getBlock:function(){return r.getBlock(t.blockHash)},getTransaction:function(){return r.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return r.getTransactionReceipt(t.transactionHash)},decode:void 0});return[].concat(Object(kt["a"])(a),[c])}}),Object(He["a"])(function(e){return!!e})));var i=Object(Me["a"])(t).pipe(Object(yn["a"])(function(t){return Wn(e,t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t})}));return Object(Cn["a"])(c,i)}function Kn(e){return Vn(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=$n["getNetwork"],t.t1=parseInt,t.next=4,e.send("net_version",[]);case 4:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.abrupt("return",(0,t.t0)(t.t3));case 7:case"end":return t.stop()}},t)}))}function Zn(e){var t=e.send;e.send=function(n,a){return Vn(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if("eth_sign"!==n){r.next=2;break}return r.abrupt("return",t.apply(this,["personal_sign",[a[1],a[0]]]).catch(function(r){if(r instanceof Error&&(r.message.includes("The method personal_sign does not exist")||r.message.includes("Method personal_sign not supported")))return e.send=t,e.send(n,a);throw r}));case 2:return r.abrupt("return",t.apply(this,[n,a]));case 3:case"end":return r.stop()}},r,this)}))}}var zn=void 0,Xn=function(e,t,n,a){return new(n||(n=Promise))(function(r,c){function i(e){try{s(a.next(e))}catch(t){c(t)}}function o(e){try{s(a["throw"](e))}catch(t){c(t)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,o)}s((a=a.apply(e,t||[])).next())})},Yn=function(e,t,n){Object(f["a"])(e),Object(f["a"])(t);var a=n.provider;return Object(Me["a"])(a.getBlockNumber()).pipe(Object(yn["a"])(function(e){return Object(Cn["a"])(Object(vn["a"])(e),Wn(a,"block"))}),Object(Be["a"])(function(e){return Je({blockNumber:e})}))},Gn=function(e,t,n){var a=n.registryContract,r=n.contractsInfo;return t.pipe(Object(Tn["a"])(1,void 0,function(t){return e.pipe(Object(Ve["a"])(Object(Pe["isActionOf"])(Je)),Object(Pn["a"])(t),Object(In["a"])(function(e){var n=Object(Ee["a"])(e,2),c=n[0].payload.blockNumber,i=n[1];return Object(Cn["a"])(qn(a,[a.filters.TokenNetworkCreated(null,null)],Object(g["isEmpty"])(i.tokens)?Object(vn["a"])(r.TokenNetworkRegistry.block_number):void 0,Object(g["isEmpty"])(i.tokens)?Object(vn["a"])(c):void 0).pipe(Object(Pn["a"])(t),Object(Be["a"])(function(e){var t=Object(Ee["a"])(e,2),n=Object(Ee["a"])(t[0],3),a=n[0],r=n[1],c=n[2],i=t[1];return et({token:a,tokenNetwork:r,fromBlock:a in i.tokens?void 0:c.blockNumber})})),Object(Me["a"])(Object.entries(i.tokens)).pipe(Object(Be["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[0],a=t[1];return et({token:n,tokenNetwork:a})})))}))}))},Qn=function(e,t){return Object(f["a"])(e),t.pipe(Object(Ve["a"])(),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i,o,s,u,d,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=0,a=Object.entries(t.channels);case 1:if(!(n<a.length)){e.next=16;break}r=Object(Ee["a"])(a[n],2),c=r[0],i=r[1],o=0,s=Object.entries(i);case 4:if(!(o<s.length)){e.next=13;break}if(u=Object(Ee["a"])(s[o],2),d=u[0],p=u[1],p.state!==$.opening){e.next=8;break}return e.abrupt("continue",10);case 8:return e.next=10,rt({id:p.id},{tokenNetwork:c,partner:d});case 10:o++,e.next=4;break;case 13:n++,e.next=1;break;case 16:case"end":return e.stop()}},e)})))},Jn=function(e,t,n){Object(f["a"])(e),Object(f["a"])(t);var a=n.address,r=n.network,c=n.provider;return Object(Me["a"])(c.listAccounts()).pipe(Object(Be["a"])(function(e){return e.includes(a)}),Object(yn["a"])(function(e){return Object(Nn["a"])(c.pollingInterval).pipe(Object(yn["a"])(function(){return Object(Cn["a"])(e?Object(Me["a"])(c.listAccounts()).pipe(Object(yn["a"])(function(e){return e.includes(a)?Sn["a"]:Object(vn["a"])(En({reason:we.ACCOUNT_CHANGED}))})):Sn["a"],Object(Me["a"])(Kn(c)).pipe(Object(yn["a"])(function(e){return e.chainId!==r.chainId?Object(vn["a"])(En({reason:we.NETWORK_CHANGED})):Sn["a"]})))}))}))},ea=function(e,t,n){var a=n.address,r=n.getTokenNetworkContract;return t.pipe(Object(Be["a"])(function(e){return e.blockNumber}),Object(Tn["a"])(1,void 0,function(t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(et)),Object(Dn["a"])(function(e){return e.payload.tokenNetwork}),Object(yn["a"])(function(e){return e.pipe(Object(Mn["a"])(function(e){var n=r(e.payload.tokenNetwork),c=[n.filters.ChannelOpened(null,a,null,null),n.filters.ChannelOpened(null,null,a,null)];return qn(n,c,e.payload.fromBlock?Object(vn["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(He["a"])(function(e){var t=Object(Ee["a"])(e,3),n=t[1],r=t[2];return n===a||r===a}),Object(Be["a"])(function(e){var t=Object(Ee["a"])(e,5),r=t[0],c=t[1],i=t[2],o=t[3],s=t[4];return nt({id:r.toNumber(),settleTimeout:o.toNumber(),openBlock:s.blockNumber,isFirstParticipant:a===c,txHash:s.transactionHash},{tokenNetwork:n.address,partner:a===c?i:c})}))}))}))}))},ta=function(e,t,n){var a=n.getTokenNetworkContract;return t.pipe(Object(Be["a"])(function(e){return e.blockNumber}),Object(Tn["a"])(1,void 0,function(t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(rt)),Object(Dn["a"])(function(e){return"".concat(e.payload.id,"#").concat(e.meta.partner,"@").concat(e.meta.tokenNetwork)}),Object(yn["a"])(function(e){return e.pipe(Object(Mn["a"])(function(e){var n=a(e.meta.tokenNetwork),r=n.filters.ChannelNewDeposit(e.payload.id,null,null),c=n.filters.ChannelWithdraw(e.payload.id,null,null),i=n.filters.ChannelClosed(e.payload.id,null,null,null),o=n.filters.ChannelSettled(e.payload.id,null,null,null,null);return Object(Cn["a"])(qn(n,[r],e.payload.fromBlock?Object(vn["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Be["a"])(function(t){var n=Object(Ee["a"])(t,4),a=n[0],r=n[1],c=n[2],i=n[3];return it({id:a.toNumber(),participant:r,totalDeposit:c,txHash:i.transactionHash},e.meta)})),qn(n,[c],e.payload.fromBlock?Object(vn["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Be["a"])(function(t){var n=Object(Ee["a"])(t,4),a=n[0],r=n[1],c=n[2],i=n[3];return st({id:a.toNumber(),participant:r,totalWithdraw:c,txHash:i.transactionHash},e.meta)})),qn(n,[i],e.payload.fromBlock?Object(vn["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Be["a"])(function(t){var n=Object(Ee["a"])(t,5),a=n[0],r=n[1],c=n[4];return dt({id:a.toNumber(),participant:r,closeBlock:c.blockNumber,txHash:c.transactionHash},e.meta)})),qn(n,[o],e.payload.fromBlock?Object(vn["a"])(e.payload.fromBlock):void 0,e.payload.fromBlock?t:void 0).pipe(Object(Be["a"])(function(t){var n=Object(Ee["a"])(t,6),a=n[0],r=n[5];return ft({id:a.toNumber(),settleBlock:r.blockNumber,txHash:r.transactionHash},e.meta)}))).pipe(Object(jn["a"])(Object(g["negate"])(Object(Pe["isActionOf"])(ft)),!0))}))}))}))},na=function(e,t,n){var a=n.getTokenNetworkContract,r=n.config$;return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(tt)),Object(Pn["a"])(t,r),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,3),n=t[0],r=t[1],c=t[2],i=a(n.meta.tokenNetwork),o=Object(g["get"])(r.channels,[n.meta.tokenNetwork,n.meta.partner,"state"]);return o!==$.opening?Object(vn["a"])(at(new Error("Invalid channel state: ".concat(o)),n.meta)):Object(Me["a"])(i.functions.openChannel(r.address,n.meta.partner,n.payload.settleTimeout||c.settleTimeout)).pipe(Object(yn["a"])(function(e){return Xn(zn,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait();case 2:return t.t0=t.sent,t.t1=e,t.abrupt("return",{receipt:t.t0,tx:t.t1});case 5:case"end":return t.stop()}},t)}))}),Object(Be["a"])(function(e){var t=e.receipt,n=e.tx;if(!t.status)throw new Error('openChannel transaction "'.concat(n.hash,'" failed'));return n.hash}),Object(Ln["a"])(Sn["a"]),Object(gn["a"])(function(e){return Object(vn["a"])(at(e,n.meta))}))}))},aa=function(e,t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(nt)),Object(Pn["a"])(t),Object(He["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[0],a=t[1],r=Object(g["get"])(a.channels,[n.meta.tokenNetwork,n.meta.partner]);return!!r&&r.state===$.open}),Object(Be["a"])(function(e){var t=Object(Ee["a"])(e,1),n=t[0];return rt({id:n.payload.id,fromBlock:n.payload.openBlock},n.meta)}))},ra=function(e,t,n){var a=n.address,r=n.getTokenContract,c=n.getTokenNetworkContract;return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(ct)),Object(Pn["a"])(t),Object(yn["a"])(function(e){var n=Object(Ee["a"])(e,2),i=n[0],o=n[1],s=Object(g["findKey"])(o.tokens,function(e){return e===i.meta.tokenNetwork});if(!s){var u=new Error('token for tokenNetwork "'.concat(i.meta.tokenNetwork,'" not found'));return Object(vn["a"])(ot(u,i.meta))}var d=r(s),p=c(i.meta.tokenNetwork),l=Object(g["get"])(o.channels,[i.meta.tokenNetwork,i.meta.partner]);if(!l||l.state!==$.open||void 0===l.id){var b=new Error('channel for "'.concat(i.meta.tokenNetwork,'" and "').concat(i.meta.partner,"\" not found or not in 'open' state"));return Object(vn["a"])(ot(b,i.meta))}var f=l.id;return Object(Me["a"])(d.functions.approve(i.meta.tokenNetwork,i.payload.deposit)).pipe(Object(Bn["a"])(function(e){return console.log('sent approve tx "'.concat(e.hash,'" to "').concat(s,'"'))}),Object(yn["a"])(function(e){return Xn(zn,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait();case 2:return t.t0=t.sent,t.t1=e,t.abrupt("return",{receipt:t.t0,tx:t.t1});case 5:case"end":return t.stop()}},t)}))}),Object(Be["a"])(function(e){var t=e.receipt,n=e.tx;if(!t.status)throw new Error('token "'.concat(s,'" approve transaction "').concat(n.hash,'" failed'));return n.hash}),Object(Bn["a"])(function(e){return console.log('approve tx "'.concat(e,'" successfuly mined!'))})).pipe(Object(Pn["a"])(t),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[1];return p.functions.setTotalDeposit(f,a,n.channels[i.meta.tokenNetwork][i.meta.partner].own.deposit.add(i.payload.deposit),i.meta.partner,{gasLimit:1e5})}),Object(Bn["a"])(function(e){return console.log('sent setTotalDeposit tx "'.concat(e.hash,'" to "').concat(i.meta.tokenNetwork,'"'))}),Object(yn["a"])(function(e){return Xn(zn,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait();case 2:return t.t0=t.sent,t.t1=e,t.abrupt("return",{receipt:t.t0,tx:t.t1});case 5:case"end":return t.stop()}},t)}))}),Object(Be["a"])(function(e){var t=e.receipt,n=e.tx;if(!t.status)throw new Error('tokenNetwork "'.concat(i.meta.tokenNetwork,'" setTotalDeposit transaction "').concat(n.hash,'" failed'));return n.hash}),Object(Bn["a"])(function(e){return console.log('setTotalDeposit tx "'.concat(e,'" successfuly mined!'))}),Object(Ln["a"])(Sn["a"]),Object(gn["a"])(function(e){return Object(vn["a"])(ot(e,i.meta))}))}))},ca=function(e,t,n){var a=n.address,r=n.network,c=n.getTokenNetworkContract,i=n.signer;return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(ut)),Object(Pn["a"])(t),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[0],o=t[1],s=c(n.meta.tokenNetwork),u=Object(g["get"])(o.channels,[n.meta.tokenNetwork,n.meta.partner]);if(!u||u.state!==$.open&&u.state!==$.closing||!u.id){var d=new Error('channel for "'.concat(n.meta.tokenNetwork,'" and "').concat(n.meta.partner,"\" not found or not in 'open' or 'closing' state"));return Object(vn["a"])(pt(d,n.meta))}var p=u.id,l=b["HashZero"],f=b["Zero"],h=b["HashZero"],O=Object(m["hexlify"])(xe),v=Object(m["concat"])([M(n.meta.tokenNetwork,20),M(r.chainId,32),M(1,32),M(p,32),M(l,32),M(f,32),M(h,32),M(O,65)]);return Object(Me["a"])(i.signMessage(v)).pipe(Object(yn["a"])(function(e){return s.functions.closeChannel(p,n.meta.partner,a,l,f,h,O,e)}),Object(Bn["a"])(function(e){return console.log('sent closeChannel tx "'.concat(e.hash,'" to "').concat(n.meta.tokenNetwork,'"'))}),Object(yn["a"])(function(e){return Xn(zn,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait();case 2:return t.t0=t.sent,t.t1=e,t.abrupt("return",{receipt:t.t0,tx:t.t1});case 5:case"end":return t.stop()}},t)}))}),Object(Be["a"])(function(e){var t=e.receipt,a=e.tx;if(!t.status)throw new Error('tokenNetwork "'.concat(n.meta.tokenNetwork,'" closeChannel transaction "').concat(a.hash,'" failed'));return console.log('closeChannel tx "'.concat(a.hash,'" successfuly mined!')),a.hash}),Object(Ln["a"])(Sn["a"]),Object(gn["a"])(function(e){return Object(vn["a"])(pt(e,n.meta))}))}))},ia=function(e,t,n){var a=n.address,r=n.getTokenNetworkContract;return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(bt)),Object(Pn["a"])(t),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[0],c=t[1],i=r(n.meta.tokenNetwork),o=Object(g["get"])(c.channels,[n.meta.tokenNetwork,n.meta.partner]);if(!o||o.state!==$.settleable&&o.state!==$.settling||!o.id){var s=new Error('channel for "'.concat(n.meta.tokenNetwork,'" and "').concat(n.meta.partner,"\" not found or not in 'settleable' or 'settling' state"));return Object(vn["a"])(mt(s,n.meta))}var u=o.id,d={transferredAmount:b["Zero"],lockedAmount:b["Zero"],locksroot:b["HashZero"]},p=Object.assign({address:n.meta.partner},o.partner.balanceProof||d),l=Object.assign({address:a},o.own.balanceProof||d);if(o.isFirstParticipant){var f=[l,p];p=f[0],l=f[1]}return Object(Me["a"])(i.functions.settleChannel(u,p.address,p.transferredAmount,p.lockedAmount,p.locksroot,l.address,l.transferredAmount,l.lockedAmount,l.locksroot)).pipe(Object(Bn["a"])(function(e){return console.log('sent settleChannel tx "'.concat(e.hash,'" to "').concat(n.meta.tokenNetwork,'"'))}),Object(yn["a"])(function(e){return Xn(zn,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait();case 2:return t.t0=t.sent,t.t1=e,t.abrupt("return",{receipt:t.t0,tx:t.t1});case 5:case"end":return t.stop()}},t)}))}),Object(Be["a"])(function(e){var t=e.receipt,a=e.tx;if(!t.status)throw new Error('tokenNetwork "'.concat(n.meta.tokenNetwork,'" settleChannel transaction "').concat(a.hash,'" failed'));return console.log('settleChannel tx "'.concat(a.hash,'" successfuly mined!')),a.hash}),Object(Ln["a"])(Sn["a"]),Object(gn["a"])(function(e){return Object(vn["a"])(mt(e,n.meta))}))}))},oa=function(e,t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(Je)),Object(Pn["a"])(t),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=Object(Ee["a"])(t,2),a=n[0].payload.blockNumber,r=n[1],e.t0=regeneratorRuntime.keys(r.channels);case 2:if((e.t1=e.t0()).done){e.next=15;break}c=e.t1.value,e.t2=regeneratorRuntime.keys(r.channels[c]);case 5:if((e.t3=e.t2()).done){e.next=13;break}if(i=e.t3.value,o=r.channels[c][i],!(o.state===$.closed&&o.settleTimeout&&o.closeBlock&&a>o.closeBlock+o.settleTimeout)){e.next=11;break}return e.next=11,lt({settleableBlock:a},{tokenNetwork:c,partner:i});case 11:e.next=5;break;case 13:e.next=2;break;case 15:case"end":return e.stop()}},e)})))},sa=(n("cf44"),n("7397"),n("70fe"),n("9e2e")),ua=n("9000"),da=n("6292"),pa=n("8914"),la=n("9b90"),ba=n("8de5"),fa=n("e2a1"),ma=n("09b6"),ha=n("0c33"),Oa=n("7e99"),va=n("c363"),ja=n("f494"),ka=n("183d"),ya=n("e62c"),ga=n.n(ya),wa=n("fc5d"),_a=function(e,t,n,a){return new(n||(n=Promise))(function(r,c){function i(e){try{s(a.next(e))}catch(t){c(t)}}function o(e){try{s(a["throw"](e))}catch(t){c(t)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,o)}s((a=a.apply(e,t||[])).next())})};function xa(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,a=[];while(t=n.exec(e))a.push(t[1]);return a}function Ea(e){return _a(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e,n.includes("://")||(n="https://".concat(n)),n+="/_matrix/client/versions",a=Date.now(),t.prev=4,t.next=7,ga()(n);case 7:if(r=t.sent,!(r.status<200||r.status>=300)){t.next=10;break}throw NaN;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),a=NaN;case 15:return t.abrupt("return",{server:e,rtt:Date.now()-a});case 16:case"end":return t.stop()}},t,null,[[4,12]])}))}function Ra(e){var t=/^(?:\w*:?\/\/)?([^\/#?&]+)/.exec(e);return t&&t[1]}function Aa(e,t){var n=Object(wa["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}n("8883");var Ca=function(){function e(t){Object(v["a"])(this,e),this.values=new Map,this.max=t}return Object(Re["a"])(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}(),Na=n("f079"),Sa=Object(g["memoize"])(function(e){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(wt)),Object(Ue["a"])(function(e,t){return Object.assign({},e,Object(z["a"])({},t.meta.address,t))},{}),Object(ha["a"])({}),Object(Na["a"])())}),Ta=["online","unavailable"],Pa=/^@(0x[0-9a-f]{40})[.:]/i,Ia=function(e,t,n){Object(f["a"])(e);var a=n.address,r=n.network,c=n.signer,i=n.matrix$,o=n.config$;return t.pipe(Object(Ve["a"])(),Object(Pn["a"])(o),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[0],a=t[1],r=a.matrixServer,c=a.matrixServerLookup,i=Object(g["get"])(n,["transport","matrix","server"]),o=Object(g["get"])(n,["transport","matrix","setup"]);return!i||r&&r!==i?r?Object(vn["a"])({server:r,setup:void 0}):Object(Me["a"])(ga()(c)).pipe(Object(yn["a"])(function(e){return e.ok?e.text():Object(sa["a"])(new Error('Could not fetch server list from "'.concat(c,'" => ').concat(e.status)))}),Object(yn["a"])(function(e){return Object(Me["a"])(xa(e))}),Object(yn["a"])(function(e){return Ea(e)}),Object(la["a"])(),Object(Be["a"])(function(e){return Object(g["sortBy"])(e,["rtt"])}),Object(Be["a"])(function(e){if(!e[0]||"number"!==typeof e[0].rtt||isNaN(e[0].rtt))throw new Error("Could not contact any matrix servers: ".concat(JSON.stringify(e)));return e[0].server}),Object(Be["a"])(function(e){return{server:e.includes("://")?e:"https://".concat(e),setup:void 0}})):Object(vn["a"])({server:i,setup:o})}),Object(yn["a"])(function(e){var t=e.server,n=e.setup,r=n||{},i=r.userId,o=r.accessToken,s=r.deviceId;if(n){var u=Object(ka["createClient"])({baseUrl:t,userId:i,accessToken:o,deviceId:s});return Object(vn["a"])({matrix:u,server:t,setup:n})}var d=Ra(t);if(!d)return Object(sa["a"])(new Error('Could not get serverName from "'.concat(t,'"')));var p=Object(ka["createClient"])({baseUrl:t}),l=a.toLowerCase();return i="@".concat(l,":").concat(d),Object(Me["a"])(c.signMessage(d)).pipe(Object(yn["a"])(function(e){return Object(Me["a"])(p.loginWithPassword(l,e)).pipe(Object(gn["a"])(function(){return Object(Me["a"])(p.register(l,e))}))}),Object(Bn["a"])(function(e){p.deviceId=e.device_id,p._http.opts.accessToken=e.access_token,p.credentials={userId:e.user_id},o=e.access_token,s=e.device_id}),Object(yn["a"])(function(){return c.signMessage(i)}),Object(Be["a"])(function(e){return{matrix:p,server:t,setup:{userId:i,accessToken:o,deviceId:s,displayName:e}}}))}),Object(yn["a"])(function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(Me["a"])(t.setDisplayName(a.displayName)).pipe(Object(yn["a"])(function(){return t.joinRoom("#raiden_".concat(r.name||r.chainId,"_discovery:").concat(Ra(n)))}),Object(ba["a"])({matrix:t,server:n,setup:a}))}),Object(Bn["a"])(function(e){var t=e.matrix;i.next(t),i.complete()}),Object(Be["a"])(function(e){var t=e.server,n=e.setup;return yt({server:t,setup:n})}))},Da=function(e,t,n){Object(f["a"])(t);var a=n.matrix$;return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(yt)),Object(In["a"])(function(){return a}),Object(Bn["a"])(function(e){return console.log("MATRIX client",e)}),Object(yn["a"])(function(e){return e.startClient({initialSyncLimit:0})}),Object(fa["a"])())},Ma=function(e,t,n){Object(f["a"])(t);var a=n.matrix$;return a.pipe(Object(yn["a"])(function(t){return e.pipe(Object(ma["a"])(function(){return t.stopClient()}))}),Object(fa["a"])())},La=function(e,t,n){Object(f["a"])(t);var a=n.matrix$;return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(gt)),Object(yn["a"])(function(e){return a.pipe(Object(Be["a"])(function(t){return{action:e,matrix:t}}))}),Object(Pn["a"])(Sa(e)),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[0],a=n.action,r=n.matrix,c=t[1];if(a.meta.address in c)return Object(vn["a"])(c[a.meta.address]);var i=[],o=!0,s=!1,u=void 0;try{for(var d,p=r.getUsers()[Symbol.iterator]();!(o=(d=p.next()).done);o=!0){var l=d.value;if(l.displayName&&l.presence){var b=void 0;try{var f=Pa.exec(l.userId);if(!f||Object(m["getAddress"])(f[1])!==a.meta.address)continue;if(b=Object(m["verifyMessage"])(l.userId,l.displayName),!b||b!==a.meta.address)continue}catch(O){continue}i.push(l)}}}catch(O){s=!0,u=O}finally{try{o||null==p.return||p.return()}finally{if(s)throw u}}if(i.length>0){var h=Object(g["minBy"])(i,"lastPresenceTs");return Object(vn["a"])(wt({userId:h.userId,available:Ta.includes(h.presence)},a.meta))}return Object(Me["a"])(r.searchUserDirectory({term:a.meta.address.toLowerCase()})).pipe(Object(Be["a"])(function(e){var t=e.results,n=[],r=!0,c=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(u.display_name){try{var d=Pa.exec(u.user_id);if(!d||Object(m["getAddress"])(d[1])!==a.meta.address)continue;var p=Object(m["verifyMessage"])(u.user_id,u.display_name);if(!p||p!==a.meta.address)continue}catch(O){continue}n.push(u.user_id)}}}catch(O){c=!0,i=O}finally{try{r||null==s.return||s.return()}finally{if(c)throw i}}if(0===n.length)throw new Error("Could not find any user with valid signature for ".concat(a.meta.address," in ").concat(JSON.stringify(t)));return n}),Object(yn["a"])(function(e){return Object(Me["a"])(e)}),Object(yn["a"])(function(e){return Aa(r,e).then(function(t){return Object.assign({},t,{user_id:e})}).catch(function(t){return console.log("Error fetching user presence, ignoring:",t),{presence:"",user_id:e}})}),Object(He["a"])(function(e){return!!e&&!!e.presence}),Object(la["a"])(),Object(Be["a"])(function(e){return Object(g["minBy"])(e,"last_active_ago")}),Object(Be["a"])(function(e){var t=e.presence,n=e.user_id;return wt({userId:n,available:Ta.includes(t)},a.meta)}),Object(gn["a"])(function(e){return Object(vn["a"])(_t(e,a.meta))}))}))},Ba=function(e,t,n){Object(f["a"])(t);var a=n.matrix$;return a.pipe(Object(In["a"])(function(e){return Object(ua["a"])(e,"event").pipe(Object(Be["a"])(function(t){return{event:t,matrix:e}}))}),Object(He["a"])(function(e){var t=e.event;return"m.presence"===t.getType()}),Object(Be["a"])(function(e){var t=e.event,n=e.matrix,a=n.getUser(t.getSender()),r=Pa.exec(a.userId),c=r&&r[1];return{user:a,matrix:n,peerAddress:c&&Object(m["getAddress"])(c)}}),Object(He["a"])(function(e){var t=e.user,n=e.peerAddress;return!(!t.presence||!n)}),Object(Pn["a"])(e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(gt)),Object(Ue["a"])(function(e,t){return e.add(t.meta.address)},new Set),Object(ha["a"])(new Set)),Sa(e)),Object(He["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[0].peerAddress,a=t[1];return a.has(n)}),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,3),n=t[0],a=n.user,r=n.matrix,c=n.peerAddress,i=t[2],o=a.userId,s=c,u=a.presence,d=Ta.includes(u);if(s in i&&i[s].payload.userId===o&&i[s].payload.available===d)return Sn["a"];var p=a.displayName?Object(vn["a"])(a.displayName):Object(Me["a"])(r.getProfileInfo(o,"displayname")).pipe(Object(Be["a"])(function(e){return e.displayname}),Object(gn["a"])(function(){return Object(vn["a"])(void 0)}));return p.pipe(Object(Be["a"])(function(e){if(!e)throw new Error('Could not get displayName of "'.concat(o,'"'));var t=Object(m["verifyMessage"])(o,e);if(!t||t!==c)throw new Error('Could not verify displayName signature of "'.concat(o,'": got "').concat(t,'"'));return t}),Object(Be["a"])(function(e){return wt({userId:o,available:d,ts:a.lastPresenceTs},{address:e})}))}),Object(gn["a"])(function(e){return console.log("Error validating presence event, ignoring",e),Sn["a"]}))},$a=function(e,t,n){var a=n.matrix$;return Object(Un["a"])(Sa(e),t).pipe(Object(Oa["a"])(new da["a"](1),function(t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(wn)),Object(yn["a"])(function(e){return a.pipe(Object(Be["a"])(function(t){return{action:e,matrix:t}}))}),Object(Fe["a"])(function(e){var n=e.action,a=e.matrix;return t.pipe(Object(He["a"])(function(e){var t=Object(Ee["a"])(e,1),a=t[0];return n.meta.address in a}),Object(va["a"])(1),Object(He["a"])(function(e){var t=Object(Ee["a"])(e,2),a=t[1];return!Object(g["get"])(a,["transport","matrix","rooms",n.meta.address,0])}),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,1),r=t[0];return a.createRoom({visibility:"private",invite:[r[n.meta.address].payload.userId]})}),Object(Be["a"])(function(e){var t=e.room_id;return xt({roomId:t},n.meta)}))}))}))},Fa=function(e,t,n){var a=n.matrix$;return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(wt)),Object(He["a"])(function(e){return e.payload.available}),Object(yn["a"])(function(e){return a.pipe(Object(Be["a"])(function(t){return{action:e,matrix:t}}))}),Object(Pn["a"])(t),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[0],a=n.action,r=n.matrix,c=t[1],i=Object(g["get"])(c,["transport","matrix","rooms",a.meta.address,0]);if(i){var o=r.getRoom(i);if(o){var s=o.getMember(a.payload.userId);if(!s)return Object(Me["a"])(r.invite(i,a.payload.userId))}}return Sn["a"]}),Object(fa["a"])())},Ua=function(e,t,n){Object(f["a"])(t);var a=n.matrix$;return a.pipe(Object(In["a"])(function(e){return Object(ua["a"])(e,"RoomMember.membership",function(t,n){return{event:t,member:n,matrix:e}})}),Object(He["a"])(function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership}),Object(Pn["a"])(Sa(e)),Object(yn["a"])(function(t){var n=Object(Ee["a"])(t,2),a=n[0],r=a.event,c=a.member,i=a.matrix,o=n[1],s=r.getSender(),u=Object(g["find"])(o,function(e){return e.payload.userId===s}),d=u?Object(vn["a"])(u):e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(wt)),Object(He["a"])(function(e){return e.payload.userId===s}),Object(va["a"])(1),Object(kn["a"])(Object(pa["a"])(3e4)));return d.pipe(Object(Be["a"])(function(e){return{matrix:i,member:c,senderPresence:e}}))}),Object(yn["a"])(function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(Me["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(Be["a"])(function(){return xt({roomId:n.roomId},{address:a.meta.address})}))}))},Ha=function(e,t,n){var a=n.matrix$;return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(xt)),Object(yn["a"])(function(e){return a.pipe(Object(Be["a"])(function(t){return{action:e,matrix:t}}))}),Object(Pn["a"])(t),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[0],a=n.action,r=n.matrix,c=t[1],i=3,o=c.transport.matrix.rooms[a.meta.address];return Object(Me["a"])(o.filter(function(e,t){return Object(f["a"])(e),t>=i})).pipe(Object(yn["a"])(function(e){return r.leave(e).then(function(){return e})}),Object(Be["a"])(function(e){return Et({roomId:e},a.meta)}))}))},Va=function(e,t,n){Object(f["a"])(e);var a=n.matrix$,r=n.network;return a.pipe(Object(In["a"])(function(e){return Object(ua["a"])(e,"Room").pipe(Object(Be["a"])(function(t){return{matrix:e,roomId:t.roomId}}))}),Object(ja["a"])(3e4),Object(Pn["a"])(t),Object(He["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[0],a=n.matrix,c=n.roomId,i=t[1],o=a.getRoom(c);if(!o)return!1;if(o.name&&o.name.match("#raiden_".concat(r.name||r.chainId,"_discovery:")))return!1;var s=Object(g["get"])(i,["transport","matrix","rooms"],{});for(var u in s){var d=!0,p=!1,l=void 0;try{for(var b,f=s[u][Symbol.iterator]();!(d=(b=f.next()).done);d=!0){var m=b.value;if(m===o.roomId)return!1}}catch(h){p=!0,l=h}finally{try{d||null==f.return||f.return()}finally{if(p)throw l}}}return!0}),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,1),n=t[0],a=n.matrix,r=n.roomId;return a.leave(r)}),Object(fa["a"])())},Wa=function(e,t,n){Object(f["a"])(e);var a=n.matrix$;return a.pipe(Object(In["a"])(function(e){return Object(ua["a"])(e,"Room.myMembership",function(t,n){return{room:t,membership:n,matrix:e}})}),Object(He["a"])(function(e){var t=e.membership;return"leave"===t}),Object(Pn["a"])(t),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i,o,s,u,d,p,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=Object(Ee["a"])(t,2),a=n[0].room,r=n[1],c=Object(g["get"])(r,["transport","matrix","rooms"],{}),e.t0=regeneratorRuntime.keys(c);case 3:if((e.t1=e.t0()).done){e.next=34;break}i=e.t1.value,o=!0,s=!1,u=void 0,e.prev=8,d=c[i][Symbol.iterator]();case 10:if(o=(p=d.next()).done){e.next=18;break}if(l=p.value,l!==a.roomId){e.next=15;break}return e.next=15,Et({roomId:l},{address:i});case 15:o=!0,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t2=e["catch"](8),s=!0,u=e.t2;case 24:e.prev=24,e.prev=25,o||null==d.return||d.return();case 27:if(e.prev=27,!s){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(24);case 32:e.next=3;break;case 34:case"end":return e.stop()}},e,null,[[8,20,24,32],[25,,27,31]])})))},qa=function(e,t,n){var a=n.matrix$;return Object(Un["a"])(Sa(e),t).pipe(Object(Oa["a"])(new da["a"](1),function(t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(wn)),Object(yn["a"])(function(e){return a.pipe(Object(Be["a"])(function(t){return{action:e,matrix:t}}))}),Object(Dn["a"])(function(e){var t=e.action;return t.meta.address}),Object(yn["a"])(function(e){return e.pipe(Object(Fe["a"])(function(e){var n=e.action,a=e.matrix;return t.pipe(Object(He["a"])(function(e){var t=Object(Ee["a"])(e,2),a=t[0],r=t[1];return n.meta.address in a&&a[n.meta.address].payload.available&&Object(g["get"])(r,["transport","matrix","rooms",n.meta.address,0])}),Object(Be["a"])(function(e){var t=Object(Ee["a"])(e,2),a=t[1];return a.transport.matrix.rooms[n.meta.address][0]}),Object($e["a"])(),Object(In["a"])(function(e){var t=a.getRoom(e);return t?Object(vn["a"])(t):Object(ua["a"])(a,"Room").pipe(Object(He["a"])(function(t){return t.roomId===e}),Object(va["a"])(1))}),Object(Pn["a"])(t),Object(yn["a"])(function(e){var r=Object(Ee["a"])(e,2),c=r[0],i=Object(Ee["a"])(r[1],1),o=i[0],s=o[n.meta.address].payload.userId,u=c.getMember(s);return u&&"join"===u.membership?Object(vn["a"])(u):Object(ua["a"])(a,"RoomMember.membership",function(e,t){return Object(f["a"])(e),t}).pipe(Object(Pn["a"])(t),Object(He["a"])(function(e){var t=Object(Ee["a"])(e,2),a=t[0],r=Object(Ee["a"])(t[1],1),i=r[0];return a.roomId===c.roomId&&a.userId===i[n.meta.address].payload.userId&&"join"===a.membership}),Object(va["a"])(1),Object(Be["a"])(function(e){var t=Object(Ee["a"])(e,1),n=t[0];return n}))}),Object(va["a"])(1),Object(yn["a"])(function(e){var t="string"===typeof n.payload.message?n.payload.message:Kt(n.payload.message);return a.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")}),Object(Be["a"])(function(){return _n(n.payload,n.meta)}))}))}))}))},Ka=function(e,t,n){var a=n.matrix$;return Object(Un["a"])(Sa(e),t).pipe(Object(Oa["a"])(new da["a"](1),function(e){return a.pipe(Object(In["a"])(function(e){return Object(ua["a"])(e,"Room.timeline",function(t,n){return{matrix:e,event:t,room:n}})}),Object(He["a"])(function(e){var t=e.event,n=e.matrix;return"m.room.message"===t.getType()&&t.getSender()!==n.getUserId()&&"m.text"===t.event.content.msgtype}),Object(yn["a"])(function(t){var n=t.event,a=t.room;return e.pipe(Object(He["a"])(function(e){var t=Object(Ee["a"])(e,2),r=t[0],c=t[1],i=Object(g["find"])(r,["payload.userId",n.getSender()]);if(!i)return!1;var o=Object(g["get"])(c,["transport","matrix","rooms",i.meta.address],[]);return!!o.includes(a.roomId)}),Object(va["a"])(1),Object(kn["a"])(Object(pa["a"])(3e4)),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var r,c,i,o,s,u,d,p,l,b,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=Object(Ee["a"])(t,1),c=r[0],i=Object(g["find"])(c,["payload.userId",n.getSender()]),o=!0,s=!1,u=void 0,e.prev=5,d=(n.event.content.body||"").split("\n")[Symbol.iterator]();case 7:if(o=(p=d.next()).done){e.next=26;break}if(l=p.value,b=void 0,e.prev=10,b=Zt(l),f=Wt(b),f===i.meta.address){e.next=15;break}throw new Error("Signature mismatch: sender=".concat(i.meta.address," != signer=").concat(f));case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](10),console.warn("Could not decode message: ".concat(l,": ").concat(e.t0)),b=void 0;case 21:return e.next=23,xn({text:l,message:b,ts:n.event.origin_server_ts,userId:i.payload.userId,roomId:a.roomId},i.meta);case 23:o=!0,e.next=7;break;case 26:e.next=32;break;case 28:e.prev=28,e.t1=e["catch"](5),s=!0,u=e.t1;case 32:e.prev=32,e.prev=33,o||null==d.return||d.return();case 35:if(e.prev=35,!s){e.next=38;break}throw u;case 38:return e.finish(35);case 39:return e.finish(32);case 40:case"end":return e.stop()}},e,null,[[5,28,32,40],[10,17],[33,,35,39]])})))}))}))},Za=function(e,t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(xn)),Object(Pn["a"])(t),Object(He["a"])(function(e){var t=Object(Ee["a"])(e,2),n=t[0],a=t[1],r=Object(g["get"])(a,["transport","matrix","rooms",n.meta.address],[]);return!!n.payload.roomId&&r.includes(n.payload.roomId)&&r[0]!==n.payload.roomId}),Object(Be["a"])(function(e){var t=Object(Ee["a"])(e,1),n=t[0];return xt({roomId:n.payload.roomId},n.meta)}))},za=function(e){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(rt)),Object(Be["a"])(function(e){return gt(void 0,{address:e.meta.partner})}))},Xa=function(e,t,n){Object(f["a"])(t);var a=n.signer,r=new Ca(32);return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(xn)),Object(Fe["a"])(function(e){var t=e.payload.message;if(!t||!(he(ee).is(t)||he(te).is(t)||he(ne).is(t)))return Sn["a"];var n=t.message_identifier,c=n.toString(),i=r.get(c);if(i)return Object(vn["a"])(wn({message:i},e.meta));var o={type:V.DELIVERED,delivered_message_identifier:n};return Object(Me["a"])(zt(a,o)).pipe(Object(Bn["a"])(function(e){return r.put(c,e)}),Object(Be["a"])(function(t){return wn({message:t},e.meta)}))}))},Ya=(n("d35e"),n("5b7b"),n("f412"));function Ga(e){return[e.pipe(Object(Be["a"])(function(e){return e[0]}),Object($e["a"])()),e.pipe(Object(Be["a"])(function(e){return e[1]}),Object($e["a"])()),e.pipe(Object(Be["a"])(function(e){return e[2]}),Object($e["a"])()),e.pipe(Object(Be["a"])(function(e){return e[3]}),Object($e["a"])())]}function Qa(e){return e?e.nonce.add(1):b["One"]}function Ja(e,t,n,a){var r=a.network,c=a.address,i=a.signer,o=a.config$;return Object(Un["a"])(e,t,o).pipe(Object(Ve["a"])(),Object(yn["a"])(function(e){var t=Object(Ee["a"])(e,3),a=t[0],o=t[1],s=t[2];if(n.meta.secrethash in o.sent)return console.error("transfer already present",n.meta),Sn["a"];if(!(n.payload.target in a))throw new Error("target not monitored");if(!a[n.payload.target].payload.available)throw new Error("target not available/online");var u=n.payload.secret;if(u&&St(u)!==n.meta.secrethash)throw new Error("secrethash does not match provided secret");for(var d=new Map,p=0,l=Object.entries(o.channels[n.payload.tokenNetwork]);p<l.length;p++){var f=Object(Ee["a"])(l[p],2),h=f[0],O=f[1],v=h,j=O.own.deposit.sub(O.own.balanceProof?O.own.balanceProof.transferredAmount.add(O.own.balanceProof.lockedAmount):b["Zero"]).add(O.partner.balanceProof?O.partner.balanceProof.transferredAmount:b["Zero"]);O.state!==$.open?console.debug('transfer: channel with "'.concat(v,'" in state "').concat(O.state,'" instead of "').concat($.open,'"')):j.lt(n.payload.amount)?console.debug('transfer: channel with "'.concat(v,'" without enough capacity (').concat(j.toString(),")")):v in a&&a[v].payload.available?d.set(v,j):console.debug('transfer: partner "'.concat(v,'" not available in transport'))}var k=Array.from(d.keys()).sort(function(e,t){if(e===n.payload.target)return-1;if(t===n.payload.target)return 1;var a=d.get(e),r=d.get(t);return a.gt(r)?-1:a.lt(r)?1:0}),y=k[0];if(!y)throw new Error("Could not find an online partner for tokenNetwork with enough capacity");if(y!==n.payload.target)throw new Error("Mediated transfers are currently not supported");var w=o.channels[n.payload.tokenNetwork][y];if(w.state!==$.open)throw new Error("not open");var _=n.payload.paymentId;_||(_=Pt());var x={amount:n.payload.amount,expiration:Object(m["bigNumberify"])(o.blockNumber+2*s.revealTimeout),secrethash:n.meta.secrethash},E=[].concat(Object(kt["a"])(w.own.locks||[]),[x]),R=Nt(E),A=n.payload.fee||b["Zero"],C=It(),N=Object(g["findKey"])(o.tokens,function(e){return e===n.payload.tokenNetwork}),S={type:V.LOCKED_TRANSFER,message_identifier:C,chain_id:Object(m["bigNumberify"])(r.chainId),token_network_address:n.payload.tokenNetwork,channel_identifier:Object(m["bigNumberify"])(w.id),nonce:Qa(w.own.balanceProof),transferred_amount:w.own.balanceProof?w.own.balanceProof.transferredAmount:b["Zero"],locked_amount:(w.own.balanceProof?w.own.balanceProof.lockedAmount:b["Zero"]).add(n.payload.amount),locksroot:R,payment_identifier:_,token:N,recipient:y,lock:x,target:n.payload.target,initiator:c,fee:A,metadata:{routes:[{route:[n.payload.target]}]}};return Object(Me["a"])(zt(i,S)).pipe(Object(yn["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!u){e.next=3;break}return e.next=3,Qt({secret:u},{secrethash:n.meta.secrethash});case 3:return e.next=5,Yt({message:t},{secrethash:n.meta.secrethash});case 5:case"end":return e.stop()}},e)})))}),Object(gn["a"])(function(e){return Object(vn["a"])(pn(e,n.meta))}))}function er(e,t,n){var a=n.signer;return e.pipe(Object(Ve["a"])(),Object(yn["a"])(function(n){var r=t.meta.secrethash;if(!(r in n.sent))throw new Error("unknown transfer");var c,i=n.sent[r].transfer[1],o=Object(g["get"])(n.channels,[i.token_network_address,i.recipient]);if(!o||o.state!==$.open||!o.own.balanceProof)throw new Error("channel gone, not open or no balanceProof");if(n.sent[r].unlock)c=Object(vn["a"])(n.sent[r].unlock[1]);else{if(i.lock.expiration.lte(n.blockNumber))throw new Error("lock expired");var s=(o.own.locks||[]).filter(function(e){return e.secrethash!==r}),u=Nt(s),d=It(),p={type:V.UNLOCK,message_identifier:d,chain_id:i.chain_id,token_network_address:i.token_network_address,channel_identifier:i.channel_identifier,nonce:Qa(o.own.balanceProof),transferred_amount:o.own.balanceProof.transferredAmount.add(i.lock.amount),locked_amount:o.own.balanceProof.lockedAmount.sub(i.lock.amount),locksroot:u,payment_identifier:i.payment_identifier,secret:n.secrets[t.meta.secrethash].secret};c=Object(Me["a"])(zt(a,p))}return c.pipe(Object(Pn["a"])(e),Object(yn["a"])(regeneratorRuntime.mark(function e(n){var a,c,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=Object(Ee["a"])(n,2),c=a[0],o=a[1],!i.lock.expiration.lte(o.blockNumber)){e.next=3;break}throw new Error("lock expired!");case 3:if(!o.sent[r].channelClosed){e.next=5;break}throw new Error("channel closed!");case 5:return e.next=7,nn({message:c},t.meta);case 7:case"end":return e.stop()}},e)})))}),Object(gn["a"])(function(e){return console.error("Error when trying to unlock after SecretReveal",e),Sn["a"]}))}function tr(e,t,n){var a=n.signer;return e.pipe(Object(Ve["a"])(),Object(yn["a"])(function(e){var n=t.meta.secrethash;if(!(n in e.sent))throw new Error("unknown transfer");var r,c=e.sent[n].transfer[1],i=Object(g["get"])(e.channels,[c.token_network_address,c.recipient]);if(!i||i.state!==$.open||!i.own.balanceProof)throw new Error("channel gone, not open or no balanceProof");if(e.sent[n].lockExpired)r=Object(vn["a"])(e.sent[n].lockExpired[1]);else{if(c.lock.expiration.gte(e.blockNumber))throw new Error("lock not yet expired");if(e.sent[n].unlock)throw new Error("transfer already unlocked");var o=(i.own.locks||[]).filter(function(e){return e.secrethash!==n}),s=Nt(o),u=It(),d={type:V.LOCK_EXPIRED,message_identifier:u,chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:Qa(i.own.balanceProof),transferred_amount:i.own.balanceProof.transferredAmount,locked_amount:i.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:s,recipient:c.recipient,secrethash:n};r=Object(Me["a"])(zt(a,d))}return r.pipe(Object(Be["a"])(function(e){return cn({message:e},t.meta)}))}),Object(gn["a"])(function(e){return Object(vn["a"])(on(e,t.meta))}))}function nr(e,t,n,a){var r=n.signer;return e.pipe(Object(Ve["a"])(),Object(yn["a"])(function(e){var n,c=t.payload.message,i=Object(g["get"])(e.channels,[t.meta.tokenNetwork,t.meta.partner]);if(!i||i.state!==$.open||!c.channel_identifier.eq(i.id))throw new Error("channel gone or not open");if(c.expiration.lte(e.blockNumber))throw new Error("WithdrawRequest expired");if(c.total_withdraw.gt(i.partner.deposit.add(i.own.balanceProof?i.own.balanceProof.transferredAmount:b["Zero"])))throw new Error("invalid total_withdraw, greater than partner.deposit + own.transferredAmount");var o=c.message_identifier.toString(),s=a.get(o);if(s&&s.chain_id.eq(c.chain_id)&&s.token_network_address===c.token_network_address&&s.channel_identifier.eq(c.channel_identifier)&&s.participant===c.participant&&s.total_withdraw.eq(c.total_withdraw)&&s.expiration.eq(c.expiration))n=Object(vn["a"])(s);else{var u={type:V.WITHDRAW_CONFIRMATION,message_identifier:c.message_identifier,chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,participant:c.participant,total_withdraw:c.total_withdraw,nonce:Qa(i.own.balanceProof),expiration:c.expiration};n=Object(Me["a"])(zt(r,u)).pipe(Object(Bn["a"])(function(e){return a.put(o,e)}))}return n.pipe(Object(Be["a"])(function(e){return fn({message:e},t.meta)}))}),Object(gn["a"])(function(e){return console.error("Error trying to handle WithdrawRequest, ignoring:",e),Sn["a"]}))}var ar=function(e,t,n){return Object(Un["a"])(Sa(e),t).pipe(Object(Tn["a"])(1,void 0,function(t){var a=Ga(t),r=Object(Ee["a"])(a,2),c=r[0],i=r[1],o=new Ca(32);return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])([Xt,tn,rn,bn])),Object(Fe["a"])(function(e){return Object(Pe["isActionOf"])(Xt,e)?Ja(c,i,e,n):Object(Pe["isActionOf"])(tn,e)?er(i,e,n):Object(Pe["isActionOf"])(rn,e)?tr(i,e,n):nr(i,e,n,o)}))}))},rr=function(e,t){return t.pipe(Object(Tn["a"])(1,void 0,function(t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(Yt)),Object(yn["a"])(function(n){var a=n.meta.secrethash,r=n.payload.message,c=wn({message:r},{address:r.recipient}),i=Object(Cn["a"])(Object(vn["a"])(c),e.pipe(Object(He["a"])(function(e){return Object(Pe["isActionOf"])(_n,e)&&e.payload.message===c.payload.message&&e.meta.address===c.meta.address}),Object(va["a"])(1),Object(fa["a"])()));return i.pipe(Object(Ya["a"])(function(e){return e.pipe(Object(ja["a"])(3e4))}),Object(kn["a"])(t.pipe(Object(He["a"])(function(e){return!!e.sent[a].transferProcessed||!!e.sent[a].unlockProcessed||!!e.sent[a].lockExpiredProcessed||!!e.sent[a].channelClosed}))))}))}))},cr=function(e,t){return t.pipe(Object(Tn["a"])(1,void 0,function(t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(nn)),Object(Pn["a"])(t),Object(yn["a"])(function(n){var a=Object(Ee["a"])(n,2),r=a[0],c=a[1],i=r.meta.secrethash;if(!(i in c.sent))return Sn["a"];var o=r.payload.message,s=c.sent[i].transfer[1],u=wn({message:o},{address:s.recipient}),d=Object(Cn["a"])(Object(vn["a"])(u),e.pipe(Object(He["a"])(function(e){return Object(Pe["isActionOf"])(_n,e)&&e.payload.message===u.payload.message&&e.meta.address===u.meta.address}),Object(va["a"])(1),Object(fa["a"])()));return d.pipe(Object(Ya["a"])(function(e){return e.pipe(Object(ja["a"])(3e4))}),Object(kn["a"])(t.pipe(Object(He["a"])(function(e){return!!e.sent[i].unlockProcessed||!!e.sent[i].channelClosed}))))}))}))},ir=function(e,t){return t.pipe(Object(Tn["a"])(1,void 0,function(t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(cn)),Object(Pn["a"])(t),Object(yn["a"])(function(n){var a=Object(Ee["a"])(n,2),r=a[0],c=a[1],i=r.meta.secrethash;if(!(i in c.sent))return Sn["a"];var o=r.payload.message,s=wn({message:o},{address:c.sent[i].transfer[1].recipient}),u=Object(Cn["a"])(Object(vn["a"])(s),e.pipe(Object(He["a"])(function(e){return Object(Pe["isActionOf"])(_n,e)&&e.payload.message===s.payload.message&&e.meta.address===s.meta.address}),Object(va["a"])(1),Object(fa["a"])()));return u.pipe(Object(Ya["a"])(function(e){return e.pipe(Object(ja["a"])(3e4))}),Object(kn["a"])(t.pipe(Object(He["a"])(function(e){return!!e.sent[i].lockExpiredProcessed||!!e.sent[i].channelClosed}))))}))}))},or=function(e,t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(Je)),Object(Pn["a"])(t),Object(Mn["a"])(function(t){for(var n=Object(Ee["a"])(t,2),a=n[0].payload.blockNumber,r=n[1],c=[],i=function(){var t=Object(Ee["a"])(s[o],2),n=t[0],r=t[1];if(r.unlock||r.lockExpired||r.channelClosed||r.transfer[1].lock.expiration.gte(a))return"continue";var i=n,u=Object(Cn["a"])(Object(vn["a"])(rn(void 0,{secrethash:i})),e.pipe(Object(He["a"])(function(e){return Object(Pe["isActionOf"])([cn,on],e)&&e.meta.secrethash===i}),Object(va["a"])(1),Object(fa["a"])()));c.push(u),c.push(Object(vn["a"])(pn(new Error("transfer expired at block=".concat(r.transfer[1].lock.expiration.toString())),{secrethash:i})))},o=0,s=Object.entries(r.sent);o<s.length;o++)i();return Cn["a"].apply(void 0,c)}))},sr=function(e,t){return Object(f["a"])(e),t.pipe(Object(Ve["a"])(),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=0,a=Object.entries(t.sent);case 1:if(!(n<a.length)){e.next=18;break}if(r=Object(Ee["a"])(a[n],2),c=r[0],i=r[1],o=c,!(i.unlockProcessed||i.lockExpiredProcessed||i.channelClosed)){e.next=6;break}return e.abrupt("continue",15);case 6:if(i.transferProcessed){e.next=9;break}return e.next=9,Yt({message:i.transfer[1]},{secrethash:o});case 9:if(!i.unlock){e.next=12;break}return e.next=12,nn({message:i.unlock[1]},{secrethash:o});case 12:if(!i.lockExpired){e.next=15;break}return e.next=15,cn({message:i.lockExpired[1]},{secrethash:o});case 15:n++,e.next=1;break;case 18:case"end":return e.stop()}},e)})))},ur=function(e,t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(xn)),Object(Pn["a"])(t),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i,o,s,u,d,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(Ee["a"])(t,2),a=n[0],r=n[1],c=a.payload.message,c&&he(ee).is(c)){e.next=4;break}return e.abrupt("return");case 4:i=void 0,o=0,s=Object.entries(r.sent);case 6:if(!(o<s.length)){e.next=14;break}if(u=Object(Ee["a"])(s[o],2),d=u[0],p=u[1],!p.transfer[1].message_identifier.eq(c.message_identifier)||p.transfer[1].recipient!==a.meta.address){e.next=11;break}return i=d,e.abrupt("break",14);case 11:o++,e.next=6;break;case 14:if(i){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,Gt({message:c},{secrethash:i});case 18:case"end":return e.stop()}},e)})))},dr=function(e,t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(xn)),Object(Pn["a"])(t),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(Ee["a"])(t,2),a=n[0],r=n[1],c=a.payload.message,c&&he(te).is(c)){e.next=4;break}return e.abrupt("return");case 4:if(c.secrethash in r.secrets&&c.secrethash in r.sent){e.next=6;break}return e.abrupt("return");case 6:if(i=r.sent[c.secrethash].transfer[1],i.target===a.meta.address&&!i.lock.expiration.lte(r.blockNumber)&&i.payment_identifier.eq(c.payment_identifier)&&i.lock.amount.eq(c.amount)&&i.lock.expiration.eq(c.expiration)){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,Jt({message:c},{secrethash:c.secrethash});case 11:case"end":return e.stop()}},e)})))},pr=function(e,t,n){var a=n.signer;return t.pipe(Object(Tn["a"])(1,void 0,function(t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(Jt)),Object(Fe["a"])(function(e){return t.pipe(Object(Ve["a"])(),Object(yn["a"])(function(t){var n,r=t.sent[e.meta.secrethash].transfer[1].target;if(t.sent[e.meta.secrethash].secretReveal)n=Object(vn["a"])(t.sent[e.meta.secrethash].secretReveal[1]);else{var c={type:V.SECRET_REVEAL,message_identifier:It(),secret:t.secrets[e.meta.secrethash].secret};n=Object(Me["a"])(zt(a,c))}return n.pipe(Object(yn["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,en({message:n},e.meta);case 2:return t.next=4,wn({message:n},{address:r});case 4:case"end":return t.stop()}},t)})))}))}))}))},lr=function(e,t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(xn)),Object(Pn["a"])(t),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(Ee["a"])(t,2),a=n[0],r=n[1],c=a.payload.message,c&&he(ne).is(c)){e.next=4;break}return e.abrupt("return");case 4:if(i=St(c.secret),i in r.sent&&a.meta.address===r.sent[i].transfer[1].recipient&&!r.sent[i].channelClosed&&!r.sent[i].unlock){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Qt({secret:c.secret},{secrethash:i});case 9:return e.next=11,tn(void 0,{secrethash:i});case 11:case"end":return e.stop()}},e)})))},br=function(e,t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(xn)),Object(Pn["a"])(t),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i,o,s,u,d,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(Ee["a"])(t,2),a=n[0],r=n[1],c=a.payload.message,c&&he(ee).is(c)){e.next=4;break}return e.abrupt("return");case 4:o=0,s=Object.entries(r.sent);case 5:if(!(o<s.length)){e.next=13;break}if(u=Object(Ee["a"])(s[o],2),d=u[0],p=u[1],!p.unlock||!p.unlock[1].message_identifier.eq(c.message_identifier)||p.transfer[1].recipient!==a.meta.address){e.next=10;break}return i=d,e.abrupt("break",13);case 10:o++,e.next=5;break;case 13:if(i){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,dn({balanceProof:qt(r.sent[i].unlock[1])},{secrethash:i});case 17:return e.next=19,an({message:c},{secrethash:i});case 19:case"end":return e.stop()}},e)})))},fr=function(e,t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(xn)),Object(Pn["a"])(t),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i,o,s,u,d,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(Ee["a"])(t,2),a=n[0],r=n[1],c=a.payload.message,c&&he(ee).is(c)){e.next=4;break}return e.abrupt("return");case 4:o=0,s=Object.entries(r.sent);case 5:if(!(o<s.length)){e.next=13;break}if(u=Object(Ee["a"])(s[o],2),d=u[0],p=u[1],!p.lockExpired||!p.lockExpired[1].message_identifier.eq(c.message_identifier)||p.transfer[1].recipient!==a.meta.address){e.next=10;break}return i=d,e.abrupt("break",13);case 10:o++,e.next=5;break;case 13:if(i){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,sn({message:c},{secrethash:i});case 17:case"end":return e.stop()}},e)})))},mr=function(e,t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])([ut,dt])),Object(Pn["a"])(t),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i,o,s,u,d,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=Object(Ee["a"])(t,2),a=n[0],r=n[1],c=0,i=Object.entries(r.sent);case 2:if(!(c<i.length)){e.next=22;break}if(o=Object(Ee["a"])(i[c],2),s=o[0],u=o[1],d=s,p=u.transfer[1],p.token_network_address===a.meta.tokenNetwork&&p.recipient===a.meta.partner){e.next=7;break}return e.abrupt("continue",19);case 7:if(u.secretReveal||u.unlock){e.next=12;break}return e.next=10,pn(new Error("Channel closed before revealing or unlocking"),{secrethash:d});case 10:e.next=19;break;case 12:if(!r.sent[d].unlock){e.next=17;break}return e.next=15,dn({balanceProof:qt(r.sent[d].unlock[1])},{secrethash:d});case 15:e.next=19;break;case 17:return e.next=19,dn({},{secrethash:d});case 19:c++,e.next=2;break;case 22:case"end":return e.stop()}},e)})))},hr=function(e,t){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(xn)),Object(Pn["a"])(t),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,c,i,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(Ee["a"])(t,2),a=n[0],r=n[1],c=a.payload.message,c&&he(se).is(c)){e.next=4;break}return e.abrupt("return");case 4:if(i=c.lock.secrethash,i in r.sent){e.next=7;break}return e.abrupt("return");case 7:if(o=Object(Ee["a"])(r.sent[i].transfer,2),s=o[1],c.initiator===s.recipient&&c.payment_identifier.eq(s.payment_identifier)&&c.lock.amount.eq(s.lock.amount)&&c.lock.expiration.eq(s.lock.expiration)&&!r.sent[i].unlock&&!r.sent[i].lockExpired&&!r.sent[i].channelClosed&&!c.lock.expiration.lte(r.blockNumber)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,un({message:c},{secrethash:i});case 12:return e.next=14,pn(new Error("transfer refunded"),{secrethash:i});case 14:case"end":return e.stop()}},e)})))},Or=function(e,t,n){Object(f["a"])(t);var a=n.signer,r=new Ca(32);return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(xn)),Object(Fe["a"])(function(e){var t=e.payload.message;if(!t||!(he(oe).is(t)||he(se).is(t)||he(de).is(t)||he(me).is(t)))return Sn["a"];var n=t.message_identifier,c=n.toString(),i=r.get(c);if(i)return Object(vn["a"])(wn({message:i},e.meta));var o={type:V.PROCESSED,message_identifier:n};return Object(Me["a"])(zt(a,o)).pipe(Object(Bn["a"])(function(e){return r.put(c,e)}),Object(Be["a"])(function(t){return wn({message:t},e.meta)}))}))},vr=function(e){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(xn)),Object(yn["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload.message,n&&he(be).is(n)&&n.participant===t.meta.address){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,bn({message:n},{tokenNetwork:n.token_network_address,partner:n.participant,totalWithdraw:n.total_withdraw,expiration:n.expiration.toNumber()});case 5:case"end":return e.stop()}},e)})))},jr=function(e){return e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(fn)),Object(Be["a"])(function(e){return wn({message:e.payload.message},{address:e.meta.partner})}))},kr=Object.assign({},o,s,u),yr=function(e,t,n){var a=e.pipe(Object(He["a"])(Object(Pe["isActionOf"])(En))),r=e.pipe(Object(jn["a"])(Object(g["negate"])(Object(Pe["isActionOf"])(En)),!0)),c=t.pipe(Object(kn["a"])(a));return c.subscribe(n.stateOutput$),r.subscribe(n.actionOutput$),Object(Me["a"])(Object.values(kr)).pipe(Object(yn["a"])(function(e){return e(r,c,n)}),Object(gn["a"])(function(e){return Object(vn["a"])(En({reason:e}))}),Object(kn["a"])(a))},gr=(d["k"](d["g"]([d["p"]({matrixServerLookup:d["m"],revealTimeout:d["i"],settleTimeout:d["i"]}),d["j"]({matrixServer:d["m"]})])),{matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50}),wr=function(e,t,n,a){return new(n||(n=Promise))(function(r,c){function i(e){try{s(a.next(e))}catch(t){c(t)}}function o(e){try{s(a["throw"](e))}catch(t){c(t)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,o)}s((a=a.apply(e,t||[])).next())})},_r=function(){function e(t,n,a,r,c,i){var o=this;Object(v["a"])(this,e),this.resolveName=t.resolveName.bind(t);var s=c.address;t.resetEventsBlock(c.blockNumber+1);var u=new Ie["a"](c);this.state$=u;var d=new De["a"];this.action$=d,this.channels$=u.pipe(Object(Be["a"])(function(e){return Object(g["transform"])(e.channels,function(t,n,a){var r=Object(g["findKey"])(e.tokens,function(e){return e===a});r&&(t[r]=Object(g["transform"])(n,function(e,t,n){var c=t.partner.balanceProof?t.partner.balanceProof.transferredAmount.add(t.partner.balanceProof.lockedAmount):b["Zero"],i=t.own.balanceProof?t.own.balanceProof.transferredAmount.add(t.own.balanceProof.lockedAmount):b["Zero"],o=c.sub(i);e[n]=Object.assign({state:t.state},Object(g["pick"])(t,["id","settleTimeout","openBlock","closeBlock"]),{token:r,tokenNetwork:a,partner:n,ownDeposit:t.own.deposit,partnerDeposit:t.partner.deposit,balance:o,capacity:t.own.deposit.add(o)})}))})})),this.transfers$=u.pipe(Object(Be["a"])(function(e){return e.sent}),Object($e["a"])(),Object(Fe["a"])(function(e){return Object(Me["a"])(Object.entries(e))}),Object(Ue["a"])(function(e,t){var n=e.acc,a=Object(Ee["a"])(t,2),r=a[0],c=a[1];return n[r]===c?{acc:n}:{acc:Object.assign({},n,Object(z["a"])({},r,c)),changed:c}},{acc:{}}),Object(He["a"])(function(e){var t=e.changed;return!!t}),Object(Be["a"])(function(e){var t=e.changed;return t}),Object(Be["a"])(Dt)),this.events$=d.pipe(Object(He["a"])(Object(Pe["isActionOf"])(Object.values(An)))),this.getTokenInfo=Object(g["memoize"])(function(e){return wr(o,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a,r,c,i,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(P.is(e)){t.next=2;break}throw new Error("Invalid address");case 2:if(e in this.state.tokens){t.next=4;break}throw new Error('token "'.concat(e,'" not monitored'));case 4:return n=this.deps.getTokenContract(e),t.next=7,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(Object(g["constant"])(void 0)),n.functions.symbol().catch(Object(g["constant"])(void 0))]);case 7:return a=t.sent,r=Object(Ee["a"])(a,4),c=r[0],i=r[1],o=r[2],s=r[3],t.abrupt("return",{totalSupply:c,decimals:i,name:o,symbol:s});case 14:case"end":return t.stop()}},t,this)}))});var p=[];this.deps={stateOutput$:u,actionOutput$:d,config$:new Ie["a"](i),matrix$:new Le["a"],provider:t,network:n,signer:a,address:s,contractsInfo:r,registryContract:new Ae["Contract"](r.TokenNetworkRegistry.address,We,a),getTokenNetworkContract:Object(g["memoize"])(function(e){return new Ae["Contract"](e,qe,a)}),getTokenContract:Object(g["memoize"])(function(e){return new Ae["Contract"](e,Ke,a)})};var l=Object(Te["a"])({dependencies:this.deps});this.store=Object(Se["b"])(On,c,Se["a"].apply(void 0,p.concat([l]))),l.run(yr)}return Object(Re["a"])(e,[{key:"stop",value:function(){this.store.dispatch(En({reason:we.STOP}))}},{key:"getBlockNumber",value:function(){return wr(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e,this)}))}},{key:"config",value:function(e){var t=this;this.deps.config$.pipe(Object(Ve["a"])()).subscribe(function(n){return t.deps.config$.next(Object.assign({},n,e))})}},{key:"getBalance",value:function(e){if(e=e||this.address,!P.is(e))throw new Error("Invalid address");return this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(e,t){return wr(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(t=t||this.address,P.is(t)&&P.is(e)){n.next=3;break}throw new Error("Invalid address");case 3:if(e in this.state.tokens){n.next=5;break}throw new Error('token "'.concat(e,'" not monitored'));case 5:return a=this.deps.getTokenContract(e),n.abrupt("return",a.functions.balanceOf(t));case 7:case"end":return n.stop()}},n,this)}))}},{key:"getTokenList",value:function(){return wr(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.state$.pipe(Object(Ve["a"])(function(e){return!Object(g["isEmpty"])(e.tokens)}),Object(Be["a"])(function(e){return Object.keys(e.tokens)})).toPromise());case 1:case"end":return e.stop()}},e,this)}))}},{key:"openChannel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return wr(this,void 0,void 0,regeneratorRuntime.mark(function a(){var r,c,i;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(P.is(e)&&P.is(t)){a.next=2;break}throw new Error("Invalid address");case 2:if(r=this.state,c=r.tokens[e],c){a.next=6;break}throw new Error("Unknown token network");case 6:return i=this.action$.pipe(Object(He["a"])(Object(Pe["isActionOf"])([nt,at])),Object(He["a"])(function(e){return e.meta.tokenNetwork===c&&e.meta.partner===t}),Object(Ve["a"])(),Object(Be["a"])(function(e){if(Object(Pe["isActionOf"])(at,e))throw e.payload;return e.payload.txHash})).toPromise(),this.store.dispatch(tt(Object.assign({},n),{tokenNetwork:c,partner:t})),a.abrupt("return",i);case 9:case"end":return a.stop()}},a,this)}))}},{key:"depositChannel",value:function(e,t,n){return wr(this,void 0,void 0,regeneratorRuntime.mark(function a(){var r,c,i;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(P.is(e)&&P.is(t)){a.next=2;break}throw new Error("Invalid address");case 2:if(r=this.state,c=r.tokens[e],c){a.next=6;break}throw new Error("Unknown token network");case 6:if(n=Object(m["bigNumberify"])(n),A(32).is(n)){a.next=9;break}throw new Error("invalid deposit: must be 0 < amount < 2^256");case 9:return i=this.action$.pipe(Object(He["a"])(Object(Pe["isActionOf"])([it,ot])),Object(He["a"])(function(e){return e.meta.tokenNetwork===c&&e.meta.partner===t}),Object(Ve["a"])(),Object(Be["a"])(function(e){if(Object(Pe["isActionOf"])(ot,e))throw e.payload;return e.payload.txHash})).toPromise(),this.store.dispatch(ct({deposit:n},{tokenNetwork:c,partner:t})),a.abrupt("return",i);case 12:case"end":return a.stop()}},a,this)}))}},{key:"closeChannel",value:function(e,t){return wr(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,r,c;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(P.is(e)&&P.is(t)){n.next=2;break}throw new Error("Invalid address");case 2:if(a=this.state,r=a.tokens[e],r){n.next=6;break}throw new Error("Unknown token network");case 6:return c=this.action$.pipe(Object(He["a"])(Object(Pe["isActionOf"])([dt,pt])),Object(He["a"])(function(e){return e.meta.tokenNetwork===r&&e.meta.partner===t}),Object(Ve["a"])(),Object(Be["a"])(function(e){if(Object(Pe["isActionOf"])(pt,e))throw e.payload;return e.payload.txHash})).toPromise(),this.store.dispatch(ut(void 0,{tokenNetwork:r,partner:t})),n.abrupt("return",c);case 9:case"end":return n.stop()}},n,this)}))}},{key:"settleChannel",value:function(e,t){return wr(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,r,c;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(P.is(e)&&P.is(t)){n.next=2;break}throw new Error("Invalid address");case 2:if(a=this.state,r=a.tokens[e],r){n.next=6;break}throw new Error("Unknown token network");case 6:return c=this.action$.pipe(Object(He["a"])(Object(Pe["isActionOf"])([ft,mt])),Object(He["a"])(function(e){return e.meta.tokenNetwork===r&&e.meta.partner===t}),Object(Ve["a"])(),Object(Be["a"])(function(e){if(Object(Pe["isActionOf"])(mt,e))throw e.payload;return e.payload.txHash})).toPromise(),this.store.dispatch(bt(void 0,{tokenNetwork:r,partner:t})),n.abrupt("return",c);case 9:case"end":return n.stop()}},n,this)}))}},{key:"getAvailability",value:function(e){return wr(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(P.is(e)){t.next=2;break}throw new Error("Invalid address");case 2:return n=this.action$.pipe(Object(He["a"])(Object(Pe["isActionOf"])([wt,_t])),Object(He["a"])(function(t){return t.meta.address===e}),Object(Ve["a"])(),Object(Be["a"])(function(e){if(Object(Pe["isActionOf"])(_t,e))throw e.payload;return e.payload})).toPromise(),this.store.dispatch(gt(void 0,{address:e})),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}))}},{key:"transfer",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return wr(this,void 0,void 0,regeneratorRuntime.mark(function r(){var c,i,o,s,u;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(P.is(e)&&P.is(t)){r.next=2;break}throw new Error("Invalid address");case 2:if(c=this.state.tokens[e],c){r.next=5;break}throw new Error("Unknown token network");case 5:if(n=Object(m["bigNumberify"])(n),A(32).is(n)){r.next=8;break}throw new Error("Invalid amount");case 8:if(i=a.paymentId?Object(m["bigNumberify"])(a.paymentId):void 0,!i||A(8).is(i)){r.next=11;break}throw new Error("Invalid opts.paymentId");case 11:if(void 0===a.secret||S.is(a.secret)){r.next=13;break}throw new Error("Invalid opts.secret");case 13:if(void 0===a.secrethash||N.is(a.secrethash)){r.next=15;break}throw new Error("Invalid opts.secrethash");case 15:if(o=a.secret,s=a.secrethash,s){r.next=21;break}o||(o=Tt()),s=St(o),r.next=23;break;case 21:if(!o||St(o)===s){r.next=23;break}throw new Error("Secret and secrethash must match if passing both");case 23:return u=this.action$.pipe(Object(He["a"])(Object(Pe["isActionOf"])([Yt,pn])),Object(Ve["a"])(function(e){return e.meta.secrethash===s}),Object(Be["a"])(function(e){if(Object(Pe["isActionOf"])(pn,e))throw e.payload;return s})).toPromise(),this.store.dispatch(Xt({tokenNetwork:c,target:t,amount:n,paymentId:i,secret:o},{secrethash:s})),r.abrupt("return",u);case 26:case"end":return r.stop()}},r,this)}))}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"network",get:function(){return this.deps.network}}],[{key:"create",value:function(t,n,a,r,c){return wr(this,void 0,void 0,regeneratorRuntime.mark(function i(){var o,s,u,d,p,l,b,f,m,h,O,v,j,k;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:return b=function(e){return e&&"function"===typeof e.getItem},o="string"===typeof t?new Ne["JsonRpcProvider"](t):t instanceof Ne["JsonRpcProvider"]?t:new Ne["Web3Provider"](t),Zn(o),i.next=5,o.getNetwork();case 5:if(s=i.sent,r){i.next=19;break}i.t0=s.name,i.next="rinkeby"===i.t0?10:"ropsten"===i.t0?12:"kovan"===i.t0?14:"goerli"===i.t0?16:18;break;case 10:return r=ze.contracts,i.abrupt("break",19);case 12:return r=Ze.contracts,i.abrupt("break",19);case 14:return r=Xe.contracts,i.abrupt("break",19);case 16:return r=Ye.contracts,i.abrupt("break",19);case 18:throw new Error("No deploy info provided nor recognized network: ".concat(JSON.stringify(s)));case 19:if(!Ae["Signer"].isSigner(n)){i.next=31;break}if(n.provider!==o){i.next=24;break}u=n,i.next=29;break;case 24:if(!(n instanceof Ce["Wallet"])){i.next=28;break}u=n.connect(o),i.next=29;break;case 28:throw new Error("Signer ".concat(n," not connected to ").concat(o));case 29:i.next=49;break;case 31:if("number"!==typeof n){i.next=35;break}u=o.getSigner(n),i.next=49;break;case 35:if(!P.is(n)){i.next=44;break}return i.next=38,o.listAccounts();case 38:if(d=i.sent,d.includes(n)){i.next=41;break}throw new Error('Account "'.concat(n,'" not found in provider, got=').concat(d));case 41:u=o.getSigner(n),i.next=49;break;case 44:if(!T.is(n)){i.next=48;break}u=new Ce["Wallet"](n,o),i.next=49;break;case 48:throw new Error("String account must be either a 0x-encoded address or private key");case 49:return i.next=51,u.getAddress();case 51:if(p=i.sent,l=Object.assign({},_e,{blockNumber:r.TokenNetworkRegistry.block_number||0,address:p,chainId:s.chainId,registry:r.TokenNetworkRegistry.address}),f=void 0,m=void 0,!a||!b(a)){i.next=74;break}return h="raiden_".concat(s.name||s.chainId,"_").concat(r.TokenNetworkRegistry.address,"_").concat(p),i.t1=Object,i.t2={},i.t3=l,i.t4=JSON,i.next=62,a.getItem(h);case 62:if(i.t5=i.sent,i.t5){i.next=65;break}i.t5="null";case 65:i.t6=i.t5,i.t7=i.t4.parse.call(i.t4,i.t6),O=i.t1.assign.call(i.t1,i.t2,i.t3,i.t7),l=ge(O),v=Object(g["debounce"])(function(e){a.setItem(h,ye(e))},1e3,{maxWait:5e3}),f=v,m=function(){return v.flush()},i.next=75;break;case 74:a&&ke.is(a)?l=a:a&&(l=ge(a));case 75:if(p===l.address){i.next=77;break}throw new Error('Mismatch between provided account and loaded state: "'.concat(p,'" !== "').concat(l.address,'"'));case 77:if(s.chainId===l.chainId&&r.TokenNetworkRegistry.address===l.registry){i.next=79;break}throw new Error("Mismatch between network or registry address and loaded state");case 79:return j=Object.assign({},gr,c),k=new e(o,s,u,r,l,j),f&&k.state$.subscribe(f,m,m),i.abrupt("return",k);case 83:case"end":return i.stop()}},i)}))}}]),e}();n.d(t,"a",function(){return $}),n.d(t,"b",function(){return _r})},f464:function(e,t,n){},ffdf:function(e,t,n){}});
//# sourceMappingURL=app.c93a9780.js.map